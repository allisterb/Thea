function ignore(){}function id(n){return n}function fst(n){return n[0]}function snd(n){return n[1]}function trd(n){return n[2]}IntelliFactory={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i in n)t[i]=n[i];return t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return IntelliFactory.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:IntelliFactory.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},ScriptBasePath:"./",ScriptPath:function(n,t){return this.ScriptBasePath+(this.ScriptSkipAssemblyDir?"":n+"/")+t},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};IntelliFactory.Runtime.OnLoad(function(){self.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});Object.setPrototypeOf||(Object.setPrototypeOf=function(n,t){return n.__proto__=t,n});console||(console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore});
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS;a=self;b=a.Thea=a.Thea||{};c=b.Web=b.Web||{};d=c.Client=c.Client||{};e=a.WebSharper=a.WebSharper||{};f=e.Obj=e.Obj||{};g=e.UI=e.UI||{};h=g.Var$1=g.Var$1||{};i=e.Operators=e.Operators||{};j=g.Templating=g.Templating||{};k=j.Runtime=j.Runtime||{};l=k.Server=k.Server||{};m=l.TemplateInstance=l.TemplateInstance||{};n=e.Arrays=e.Arrays||{};o=l.ProviderBuilder=l.ProviderBuilder||{};p=g.ListModel=g.ListModel||{};q=l.Handler=l.Handler||{};r=a.Thea$Web_Templates=a.Thea$Web_Templates||{};s=g.Var=g.Var||{};t=g.ConcreteVar=g.ConcreteVar||{};u=g.Snap=g.Snap||{};v=e.Collections=e.Collections||{};w=v.List=v.List||{};x=e.Unchecked=e.Unchecked||{};y=a.System=a.System||{};z=y.Guid=y.Guid||{};A=a.StartupCode$Thea_Web$Client=a.StartupCode$Thea_Web$Client||{};B=v.Dictionary=v.Dictionary||{};C=v.HashSet=v.HashSet||{};D=k.Client=k.Client||{};E=e.Seq=e.Seq||{};F=g.Client=g.Client||{};G=F.Templates=F.Templates||{};H=g.Doc=g.Doc||{};I=e.JavaScript=e.JavaScript||{};J=I.Pervasives=I.Pervasives||{};K=g.Abbrev=g.Abbrev||{};L=K.Fresh=K.Fresh||{};M=a.Object;N=g.View=g.View||{};O=g.AttrProxy=g.AttrProxy||{};P=g.CheckedInput=g.CheckedInput||{};Q=e.Numeric=e.Numeric||{};R=v.DictionaryUtil=v.DictionaryUtil||{};S=e.Enumerator=e.Enumerator||{};T=S.T=S.T||{};U=a.EventTarget;V=a.Node;W=I.JS=I.JS||{};X=g.DomUtility=g.DomUtility||{};Y=a.StartupCode$WebSharper_UI$Templates=a.StartupCode$WebSharper_UI$Templates||{};Z=a.WindowOrWorkerGlobalScope;_0=a.StartupCode$WebSharper_UI$DomUtility=a.StartupCode$WebSharper_UI$DomUtility||{};_1=g.Docs=g.Docs||{};_2=a.StartupCode$WebSharper_UI$Abbrev=a.StartupCode$WebSharper_UI$Abbrev||{};_3=g.DocElemNode=g.DocElemNode||{};_4=a.CharacterData;_5=g.Storage=g.Storage||{};_6=g.Elt=g.Elt||{};_7=G.Prepare=G.Prepare||{};_8=e.Slice=e.Slice||{};_9=v.KeyCollection=v.KeyCollection||{};_=g.An=g.An||{};$=F.Settings=F.Settings||{};ba=K.Mailbox=K.Mailbox||{};bb=v.HashSetUtil=v.HashSetUtil||{};bc=F.Attrs=F.Attrs||{};bd=bc.Dyn=bc.Dyn||{};be=g.Array=g.Array||{};bf=_5.ArrayStorage=_5.ArrayStorage||{};bg=g.Attrs=g.Attrs||{};bh=g.AttrModule=g.AttrModule||{};bi=e.List=e.List||{};bj=bi.T=bi.T||{};bk=e.Strings=e.Strings||{};bl=g.Updates=g.Updates||{};bm=F.Docs=F.Docs||{};bn=bm.RunState=bm.RunState||{};bo=bm.NodeSet=bm.NodeSet||{};bp=g.Anims=g.Anims||{};bq=a.StartupCode$WebSharper_UI$Doc_Proxy=a.StartupCode$WebSharper_UI$Doc_Proxy||{};br=g.String=g.String||{};bs=a.StartupCode$WebSharper_UI$Animation=a.StartupCode$WebSharper_UI$Animation||{};bt=e.Concurrency=e.Concurrency||{};bu=g.AppendList=g.AppendList||{};bv=e.Char=e.Char||{};bw=g.DynamicAttrNode=g.DynamicAttrNode||{};bx=a.StartupCode$WebSharper_UI$Attr_Client=a.StartupCode$WebSharper_UI$Attr_Client||{};by=g.Easing=g.Easing||{};bz=bt.AsyncBody=bt.AsyncBody||{};bA=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};bB=bt.CT=bt.CT||{};bC=K.HashSet=K.HashSet||{};bD=bt.Scheduler=bt.Scheduler||{};bE=e.CancellationTokenSource=e.CancellationTokenSource||{};bF=bm.DomNodes=bm.DomNodes||{};bG=e.Queue=e.Queue||{};bH=a.Error;bI=e.OperationCanceledException=e.OperationCanceledException||{};bJ=e.Lazy=e.Lazy||{};bK=a.StartupCode$WebSharper_UI$AppendList=a.StartupCode$WebSharper_UI$AppendList||{};bL=e.LazyExtensionsProxy=e.LazyExtensionsProxy||{};bM=bL.LazyRecord=bL.LazyRecord||{};bN=a.IntelliFactory;bO=bN&&bN.Runtime;bP=a.console;bQ=a.Math;bR=a.jQuery;bS=a.Date;d.Main=function(){var bT,bU,bV,bW,bX,bY,bZ;bT=h.Create$1("");bU=(bV=(bW=(bX=H.Convert(function(b0){var b1,b2,b3;return(b1=o.Make().WithHole({$:1,$0:"name",$1:b0}),(b2=q.CompleteHoles(b1.k,b1.h,[]),(b3=new m.New(b2[1],r.listitem(b2[0])),(b1.i=b3,b3)))).get_Doc();},d.People().v),o.Make().WithHole({$:0,$0:"listcontainer",$1:bX})).WithHole({$:8,$0:"name",$1:bT}),bW.WithHole(q.EventQ2(bW.k,"add",function(){return bW.i;},function(){d.People().Append(bT.Get());bT.Set("");}))),(bY=q.CompleteHoles(bV.k,bV.h,[["name",0]]),(bZ=new m.New(bY[1],r.main(bY[0])),(bV.i=bZ,bZ)))).get_Doc();G.LoadLocalTemplates("");H.RunById("main",bU);};d.People=function(){A.$cctor();return A.People;};f=e.Obj=bO.Class({Equals:function(bT){return this===bT;},GetHashCode:function(){return -1;}},null,f);f.New=bO.Ctor(function(){},f);h=g.Var$1=bO.Class({},f,h);h.Create$1=function(bT){return new t.New(false,u.New({$:2,$0:bT,$1:[]}),bT);};i.FailWith=function(bT){throw new bH(bT);};i.KeyValue=function(bT){return[bT.K,bT.V];};m=l.TemplateInstance=bO.Class({get_Doc:function(){return this.doc;}},f,m);m.New=bO.Ctor(function(bT,bU){f.New.call(this);this.doc=bU;this.allVars=bT.$==0?bT.$0:i.FailWith("Should not happen");},m);n.get=function(bT,bU){n.checkBounds(bT,bU);return bT[bU];};n.length=function(bT){return bT.dims===2?bT.length*bT.length:bT.length;};n.checkBounds=function(bT,bU){if(bU<0||bU>=bT.length)i.FailWith("Index was outside the bounds of the array.");};n.set=function(bT,bU,bV){n.checkBounds(bT,bU);bT[bU]=bV;};o=l.ProviderBuilder=bO.Class({WithHole:function(bT){this.h.push(bT);return this;}},null,o);o.Make=function(){var bT;return o.New(null,(bT=z.NewGuid(),a.String(bT)),[]);};o.New=function(bT,bU,bV){return new o({i:bT,k:bU,h:bV});};p=g.ListModel=bO.Class({Append:function(bT){var bU,bV,bW,bX;bU=this;bV=this["var"].Get();bW=this.key(bT);bX=n.tryFindIndex(function(bY){return x.Equals(bU.key(bY),bW);},bV);bX!=null&&bX.$==1?this["var"].Set(this.storage.SSetAt(bX.$0,bT,bV)):this["var"].Set(this.storage.SAppend(bT,bV));this.ObsoleteKey(bW);},ObsoleteKey:function(bT){var bU,bV;bU=(bV=null,[this.it.TryGetValue(bT,{get:function(){return bV;},set:function(bW){bV=bW;}}),bV]);bU[0]?(u.Obsolete(bU[1]),this.it.Remove(bT)):void 0;},GetEnumerator:function(){return S.Get(this["var"].Get());},GetEnumerator0:function(){return S.Get0(this["var"].Get());}},f,p);p.New=bO.Ctor(function(bT,bU){p.New$3.call(this,bT,h.Create$1(n.ofSeq(E.distinctBy(bT,bU.SInit()))),bU);},p);p.New$3=bO.Ctor(function(bT,bU,bV){f.New.call(this);this.key=bT;this["var"]=bU;this.storage=bV;this.v=N.Map(function(bW){return bW.slice();},this["var"].get_View());this.it=new B.New$5();},p);q.CompleteHoles=function(bT,bU,bV){var bX,bY,bZ,b0,b1,b2;function bW(b3,b4){var b5,b6,b7,b8;return bY.Contains(b3)?null:(b5=b4===0?(b6=h.Create$1(""),[{$:8,$0:b3,$1:b6},b6]):b4===1?(b7=h.Create$1(0),[{$:13,$0:b3,$1:b7},b7]):b4===2?(b8=h.Create$1(false),[{$:9,$0:b3,$1:b8},b8]):i.FailWith("Invalid value type"),(bX.set_Item(b3,b5[1]),{$:1,$0:b5[0]}));}bX=new B.New$5();bY=new C.New$3();bZ=S.Get(bU);try{while(bZ.MoveNext()){b0=bZ.Current();(b0.$==8?(b1=[b0.$0,D.Box(b0.$1)],true):b0.$==11?(b1=[b0.$0,D.Box(b0.$1)],true):b0.$==10?(b1=[b0.$0,D.Box(b0.$1)],true):b0.$==13?(b1=[b0.$0,D.Box(b0.$1)],true):b0.$==12?(b1=[b0.$0,D.Box(b0.$1)],true):b0.$==9&&(b1=[b0.$0,D.Box(b0.$1)],true))?(b2=b1[0],bY.Add(b2),bX.set_Item(b2,b1[1])):void 0;}}finally{if(typeof bZ=="object"&&"Dispose"in bZ)bZ.Dispose();}return[E.append(bU,n.choose(function(b3){return bW(b3[0],b3[1]);},bV)),{$:0,$0:bX}];};q.EventQ2=function(bT,bU,bV,bW){return{$:5,$0:bU,$1:true,$2:function(bX){return function(bY){return bW({Vars:bV(),Target:bX,Event:bY});};}};};r.listitem=function(bT){G.LoadLocalTemplates("index");return bT?G.NamedTemplate("index",{$:1,$0:"listitem"},bT):void 0;};r.main=function(bT){G.LoadLocalTemplates("index");return bT?G.NamedTemplate("index",{$:1,$0:"main"},bT):void 0;};s=g.Var=bO.Class({},f,s);s.New=bO.Ctor(function(){f.New.call(this);},s);t=g.ConcreteVar=bO.Class({Get:function(){return this.current;},Set:function(bT){if(this.isConst)(function(bU){return bU("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal");}(function(bU){bP.log(bU);}));else{u.Obsolete(this.snap);this.current=bT;this.snap=u.New({$:2,$0:bT,$1:[]});}},get_View:function(){return this.view;},UpdateMaybe:function(bT){var bU;bU=bT(this.Get());bU!=null&&bU.$==1?this.Set(bU.$0):void 0;}},s,t);t.New=bO.Ctor(function(bT,bU,bV){var bW;bW=this;s.New.call(this);this.isConst=bT;this.current=bV;this.snap=bU;this.view=function(){return bW.snap;};this.id=L.Int();},t);u.Map=function(bT,bU){var bV,bW;bV=bU.s;return bV!=null&&bV.$==0?u.New({$:0,$0:bT(bV.$0)}):(bW=u.New({$:3,$0:[],$1:[]}),(u.When(bU,function(bX){u.MarkDone(bW,bU,bT(bX));},bW),bW));};u.WhenRun=function(bT,bU,bV){var bW;bW=bT.s;bW==null?bV():bW!=null&&bW.$==2?(bW.$1.push(bV),bU(bW.$0)):bW!=null&&bW.$==3?(bW.$0.push(bU),bW.$1.push(bV)):bU(bW.$0);};u.WhenObsoleteRun=function(bT,bU){var bV;bV=bT.s;bV==null?bU():bV!=null&&bV.$==2?bV.$1.push(bU):bV!=null&&bV.$==3?bV.$1.push(bU):void 0;};u.When=function(bT,bU,bV){var bW;bW=bT.s;bW==null?u.Obsolete(bV):bW!=null&&bW.$==2?(u.EnqueueSafe(bW.$1,bV),bU(bW.$0)):bW!=null&&bW.$==3?(bW.$0.push(bU),u.EnqueueSafe(bW.$1,bV)):bU(bW.$0);};u.MarkDone=function(bT,bU,bV){var bW;if(bW=bU.s,bW!=null&&bW.$==0)u.MarkForever(bT,bV);else u.MarkReady(bT,bV);};u.Map3=function(bT,bU,bV,bW){var bX,bY,bZ,b0;function b1(b2){var b3,b4,b5,b6;if(!(b3=b0.s,b3!=null&&b3.$==0||b3!=null&&b3.$==2)){b4=u.ValueAndForever(bU);b5=u.ValueAndForever(bV);b6=u.ValueAndForever(bW);b4!=null&&b4.$==1?b5!=null&&b5.$==1?b6!=null&&b6.$==1?b4.$0[1]&&b5.$0[1]&&b6.$0[1]?u.MarkForever(b0,bT(b4.$0[0],b5.$0[0],b6.$0[0])):u.MarkReady(b0,bT(b4.$0[0],b5.$0[0],b6.$0[0])):void 0:void 0:void 0;}}bX=bU.s;bY=bV.s;bZ=bW.s;return bX!=null&&bX.$==0?bY!=null&&bY.$==0?bZ!=null&&bZ.$==0?u.New({$:0,$0:bT(bX.$0,bY.$0,bZ.$0)}):u.Map3Opt1(bT,bX.$0,bY.$0,bW):bZ!=null&&bZ.$==0?u.Map3Opt2(bT,bX.$0,bZ.$0,bV):u.Map3Opt3(bT,bX.$0,bV,bW):bY!=null&&bY.$==0?bZ!=null&&bZ.$==0?u.Map3Opt4(bT,bY.$0,bZ.$0,bU):u.Map3Opt5(bT,bY.$0,bU,bW):bZ!=null&&bZ.$==0?u.Map3Opt6(bT,bZ.$0,bU,bV):(b0=u.New({$:3,$0:[],$1:[]}),(u.When(bU,b1,b0),u.When(bV,b1,b0),u.When(bW,b1,b0),b0));};u.Sequence=function(bT){var bU,bV,bW;function bX(bY){var bZ;if(bW[0]===0){bZ=n.map(function(b0){var b1;b1=b0.s;return b1!=null&&b1.$==0?b1.$0:b1!=null&&b1.$==2?b1.$0:i.FailWith("value not found by View.Sequence");},bU);n.forall(function(b0){var b1;b1=b0.s;return b1!=null&&b1.$==0;},bU)?u.MarkForever(bV,bZ):u.MarkReady(bV,bZ);}else bW[0]--;}bU=n.ofSeq(bT);return bU.length==0?u.New({$:0,$0:[]}):(bV=u.New({$:3,$0:[],$1:[]}),(bW=[n.length(bU)-1],(n.iter(function(bY){u.When(bY,bX,bV);},bU),bV)));};u.Map2=function(bT,bU,bV){var bW,bX,bY;function bZ(b0){var b1,b2,b3;if(!(b1=bY.s,b1!=null&&b1.$==0||b1!=null&&b1.$==2)){b2=u.ValueAndForever(bU);b3=u.ValueAndForever(bV);b2!=null&&b2.$==1?b3!=null&&b3.$==1?b2.$0[1]&&b3.$0[1]?u.MarkForever(bY,bT(b2.$0[0],b3.$0[0])):u.MarkReady(bY,bT(b2.$0[0],b3.$0[0])):void 0:void 0;}}bW=bU.s;bX=bV.s;return bW!=null&&bW.$==0?bX!=null&&bX.$==0?u.New({$:0,$0:bT(bW.$0,bX.$0)}):u.Map2Opt1(bT,bW.$0,bV):bX!=null&&bX.$==0?u.Map2Opt2(bT,bX.$0,bU):(bY=u.New({$:3,$0:[],$1:[]}),(u.When(bU,bZ,bY),u.When(bV,bZ,bY),bY));};u.Map2Unit=function(bT,bU){var bV,bW,bX;function bY(){var bZ,b0,b1;if(!(bZ=bX.s,bZ!=null&&bZ.$==0||bZ!=null&&bZ.$==2)){b0=u.ValueAndForever(bT);b1=u.ValueAndForever(bU);b0!=null&&b0.$==1?b1!=null&&b1.$==1?b0.$0[1]&&b1.$0[1]?u.MarkForever(bX,null):u.MarkReady(bX,null):void 0:void 0;}}bV=bT.s;bW=bU.s;return bV!=null&&bV.$==0?bW!=null&&bW.$==0?u.New({$:0,$0:null}):bU:bW!=null&&bW.$==0?bT:(bX=u.New({$:3,$0:[],$1:[]}),(u.When(bT,bY,bX),u.When(bU,bY,bX),bX));};u.Copy=function(bT){var bU,bV,bW;bU=bT.s;return bU==null?bT:bU!=null&&bU.$==2?(bV=u.New({$:2,$0:bU.$0,$1:[]}),(u.WhenObsolete(bT,bV),bV)):bU!=null&&bU.$==3?(bW=u.New({$:3,$0:[],$1:[]}),(u.When(bT,function(bX){u.MarkDone(bW,bT,bX);},bW),bW)):bT;};u.EnqueueSafe=function(bT,bU){var bV,bW,bX,bY;bT.push(bU);if(bT.length%20===0){bV=bT.slice(0);bG.Clear(bT);for(bW=0,bX=n.length(bV)-1;bW<=bX;bW++){bY=n.get(bV,bW);typeof bY=="object"?function(bZ){if(bZ.s)bT.push(bZ);}(bY):function(bZ){bT.push(bZ);}(bY);}}else void 0;};u.MarkForever=function(bT,bU){var bV,bW,bX,bY;bV=bT.s;if(bV!=null&&bV.$==3){bT.s={$:0,$0:bU};bW=bV.$0;for(bX=0,bY=n.length(bW)-1;bX<=bY;bX++)(n.get(bW,bX))(bU);}else void 0;};u.MarkReady=function(bT,bU){var bV,bW,bX,bY;bV=bT.s;if(bV!=null&&bV.$==3){bT.s={$:2,$0:bU,$1:bV.$1};bW=bV.$0;for(bX=0,bY=n.length(bW)-1;bX<=bY;bX++)(n.get(bW,bX))(bU);}else void 0;};u.Join=function(bT){var bU;bU=u.New({$:3,$0:[],$1:[]});u.When(bT,function(bV){var bW;bW=bV();u.When(bW,function(bX){var bY,bZ;if((bY=bW.s,bY!=null&&bY.$==0)&&(bZ=bT.s,bZ!=null&&bZ.$==0))u.MarkForever(bU,bX);else u.MarkReady(bU,bX);},bU);},bU);return bU;};u.Map3Opt1=function(bT,bU,bV,bW){return u.Map(function(bX){return bT(bU,bV,bX);},bW);};u.Map3Opt2=function(bT,bU,bV,bW){return u.Map(function(bX){return bT(bU,bX,bV);},bW);};u.Map3Opt3=function(bT,bU,bV,bW){return u.Map2(function(bX,bY){return bT(bU,bX,bY);},bV,bW);};u.Map3Opt4=function(bT,bU,bV,bW){return u.Map(function(bX){return bT(bX,bU,bV);},bW);};u.Map3Opt5=function(bT,bU,bV,bW){return u.Map2(function(bX,bY){return bT(bX,bU,bY);},bV,bW);};u.Map3Opt6=function(bT,bU,bV,bW){return u.Map2(function(bX,bY){return bT(bX,bY,bU);},bV,bW);};u.ValueAndForever=function(bT){var bU;bU=bT.s;return bU!=null&&bU.$==0?{$:1,$0:[bU.$0,true]}:bU!=null&&bU.$==2?{$:1,$0:[bU.$0,false]}:null;};u.Map2Opt1=function(bT,bU,bV){return u.Map(function(bW){return bT(bU,bW);},bV);};u.Map2Opt2=function(bT,bU,bV){return u.Map(function(bW){return bT(bW,bU);},bV);};u.WhenObsolete=function(bT,bU){var bV;bV=bT.s;bV==null?u.Obsolete(bU):bV!=null&&bV.$==2?u.EnqueueSafe(bV.$1,bU):bV!=null&&bV.$==3?u.EnqueueSafe(bV.$1,bU):void 0;};w=v.List=bO.Class({GetEnumerator:function(){return S.Get(this);},GetEnumerator0:function(){return S.Get0(this);}},null,w);x.Equals=function(bT,bU){var bV,bW,bX,bY;if(bT===bU)return true;else{bV=typeof bT;if(bV=="object"){if(bT===null||bT===void 0||bU===null||bU===void 0)return false;else if("Equals"in bT)return bT.Equals(bU);else if(bT instanceof a.Array&&bU instanceof a.Array)return x.arrayEquals(bT,bU);else if(bT instanceof a.Date&&bU instanceof a.Date)return x.dateEquals(bT,bU);else{bW=[true];for(var bZ in bT)if(function(b0){bW[0]=!bT.hasOwnProperty(b0)||bU.hasOwnProperty(b0)&&x.Equals(bT[b0],bU[b0]);return!bW[0];}(bZ))break;if(bW[0]){for(var b0 in bU)if(function(b1){bW[0]=!bU.hasOwnProperty(b1)||bT.hasOwnProperty(b1);return!bW[0];}(b0))break;}return bW[0];}}else return bV=="function"&&("$Func"in bT?bT.$Func===bU.$Func&&bT.$Target===bU.$Target:"$Invokes"in bT&&"$Invokes"in bU&&x.arrayEquals(bT.$Invokes,bU.$Invokes));}};x.Hash=function(bT){var bU;bU=typeof bT;return bU=="function"?0:bU=="boolean"?bT?1:0:bU=="number"?bT:bU=="string"?x.hashString(bT):bU=="object"?bT==null?0:bT instanceof a.Array?x.hashArray(bT):x.hashObject(bT):0;};x.arrayEquals=function(bT,bU){var bV,bW;if(n.length(bT)===n.length(bU)){bV=true;bW=0;while(bV&&bW<n.length(bT)){!x.Equals(n.get(bT,bW),n.get(bU,bW))?bV=false:void 0;bW=bW+1;}return bV;}else return false;};x.dateEquals=function(bT,bU){return bT.getTime()===bU.getTime();};x.hashString=function(bT){var bU,bV,bW;if(bT===null)return 0;else{bU=5381;for(bV=0,bW=bT.length-1;bV<=bW;bV++)bU=x.hashMix(bU,bT[bV].charCodeAt());return bU;}};x.hashArray=function(bT){var bU,bV,bW;bU=-34948909;for(bV=0,bW=n.length(bT)-1;bV<=bW;bV++)bU=x.hashMix(bU,x.Hash(n.get(bT,bV)));return bU;};x.hashObject=function(bT){var bU,bV;if("GetHashCode"in bT)return bT.GetHashCode();else{bU=[0];for(var bW in bT)if(function(bX){bU[0]=x.hashMix(x.hashMix(bU[0],x.hashString(bX)),x.Hash(bT[bX]));return false;}(bW))break;return bU[0];}};x.hashMix=function(bT,bU){return(bT<<5)+bT+bU;};x.Compare=function(bT,bU){var bV,bW,bX,bY,bZ,b0;if(bT===bU)return 0;else{bW=typeof bT;switch(bW=="function"?1:bW=="boolean"?2:bW=="number"?2:bW=="string"?2:bW=="object"?3:0){case 0:return typeof bU=="undefined"?0:-1;case 1:return i.FailWith("Cannot compare function values.");case 2:return bT<bU?-1:1;case 3:if(bT===null)bX=-1;else if(bU===null)bX=1;else if("CompareTo"in bT)bX=bT.CompareTo(bU);else if("CompareTo0"in bT)bX=bT.CompareTo0(bU);else if(bT instanceof a.Array&&bU instanceof a.Array)bX=x.compareArrays(bT,bU);else if(bT instanceof a.Date&&bU instanceof a.Date)bX=x.compareDates(bT,bU);else{bY=[0];for(var b1 in bT)if(function(b2){return!bT.hasOwnProperty(b2)?false:!bU.hasOwnProperty(b2)?(bY[0]=1,true):(bY[0]=x.Compare(bT[b2],bU[b2]),bY[0]!==0);}(b1))break;if(bY[0]===0){for(var b2 in bU)if(function(b3){return!bU.hasOwnProperty(b3)?false:!bT.hasOwnProperty(b3)&&(bY[0]=-1,true);}(b2))break;}bX=bY[0];}return bX;}}};x.compareArrays=function(bT,bU){var bV,bW;if(n.length(bT)<n.length(bU))return -1;else if(n.length(bT)>n.length(bU))return 1;else{bV=0;bW=0;while(bV===0&&bW<n.length(bT)){bV=x.Compare(n.get(bT,bW),n.get(bU,bW));bW=bW+1;}return bV;}};x.compareDates=function(bT,bU){return x.Compare(bT.getTime(),bU.getTime());};z.NewGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(new a.RegExp("[xy]","g"),function(bT){var bU,bV;bU=bQ.random()*16|0;bV=bT=="x"?bU:bU&3|8;return bV.toString(16);});};A.$cctor=function(){A.$cctor=a.ignore;A.People=p.FromSeq(["John","Paul"]);};B=v.Dictionary=bO.Class({set_Item:function(bT,bU){this.set(bT,bU);},set:function(bT,bU){var bV,bW,bX,bY;bV=this;bW=this.hash(bT);bX=this.data[bW];bX==null?(this.count=this.count+1,this.data[bW]=new a.Array({K:bT,V:bU})):(bY=n.tryFindIndex(function(bZ){return bV.equals.apply(null,[(i.KeyValue(bZ))[0],bT]);},bX),bY==null?(this.count=this.count+1,bX.push({K:bT,V:bU})):bX[bY.$0]={K:bT,V:bU});},TryGetValue:function(bT,bU){var bV,bW,bX;bV=this;bW=this.data[this.hash(bT)];return bW==null?false:(bX=n.tryPick(function(bY){var bZ;bZ=i.KeyValue(bY);return bV.equals.apply(null,[bZ[0],bT])?{$:1,$0:bZ[1]}:null;},bW),bX!=null&&bX.$==1&&(bU.set(bX.$0),true));},Remove:function(bT){return this.remove(bT);},ContainsKey:function(bT){var bU,bV;bU=this;bV=this.data[this.hash(bT)];return bV==null?false:n.exists(function(bW){return bU.equals.apply(null,[(i.KeyValue(bW))[0],bT]);},bV);},get_Keys:function(){return new _9.New(this);},remove:function(bT){var bU,bV,bW,bX;bU=this;bV=this.hash(bT);bW=this.data[bV];return bW==null?false:(bX=n.filter(function(bY){return!bU.equals.apply(null,[(i.KeyValue(bY))[0],bT]);},bW),n.length(bX)<bW.length&&(this.count=this.count-1,this.data[bV]=bX,true));},get_Item:function(bT){return this.get(bT);},get:function(bT){var bU,bV;bU=this;bV=this.data[this.hash(bT)];return bV==null?R.notPresent():n.pick(function(bW){var bX;bX=i.KeyValue(bW);return bU.equals.apply(null,[bX[0],bT])?{$:1,$0:bX[1]}:null;},bV);},GetEnumerator:function(){return S.Get0(this);},GetEnumerator0:function(){return S.Get0(n.concat(W.GetFieldValues(this.data)));}},f,B);B.New$5=bO.Ctor(function(){B.New$6.call(this,[],x.Equals,x.Hash);},B);B.New$6=bO.Ctor(function(bT,bU,bV){var bW,bX;f.New.call(this);this.equals=bU;this.hash=bV;this.count=0;this.data=[];bW=S.Get(bT);try{while(bW.MoveNext()){bX=bW.Current();this.set(bX.K,bX.V);}}finally{if(typeof bW=="object"&&"Dispose"in bW)bW.Dispose();}},B);C=v.HashSet=bO.Class({Add:function(bT){return this.add(bT);},Contains:function(bT){var bU;bU=this.data[this.hash(bT)];return bU==null?false:this.arrContains(bT,bU);},add:function(bT){var bU,bV;bU=this.hash(bT);bV=this.data[bU];return bV==null?(this.data[bU]=[bT],this.count=this.count+1,true):this.arrContains(bT,bV)?false:(bV.push(bT),this.count=this.count+1,true);},arrContains:function(bT,bU){var bV,bW,bX,bY;bV=true;bW=0;bY=bU.length;while(bV&&bW<bY)if(this.equals.apply(null,[bU[bW],bT]))bV=false;else bW=bW+1;return!bV;},ExceptWith:function(bT){var bU;bU=S.Get(bT);try{while(bU.MoveNext())this.Remove(bU.Current());}finally{if(typeof bU=="object"&&"Dispose"in bU)bU.Dispose();}},get_Count:function(){return this.count;},CopyTo:function(bT){var bU,bV,bW,bX;bU=0;bV=bb.concat(this.data);for(bW=0,bX=bV.length-1;bW<=bX;bW++)n.set(bT,bW,bV[bW]);},IntersectWith:function(bT){var bU,bV,bW,bX,bY;bU=new C.New$4(bT,this.equals,this.hash);bV=bb.concat(this.data);for(bW=0,bX=bV.length-1;bW<=bX;bW++){bY=bV[bW];!bU.Contains(bY)?this.Remove(bY):void 0;}},Remove:function(bT){var bU;bU=this.data[this.hash(bT)];return bU==null?false:this.arrRemove(bT,bU)&&(this.count=this.count-1,true);},arrRemove:function(bT,bU){var bV,bW,bX,bY;bV=true;bW=0;bY=bU.length;while(bV&&bW<bY)if(this.equals.apply(null,[bU[bW],bT])){bU.splice.apply(bU,[bW,1]);bV=false;}else bW=bW+1;return!bV;},GetEnumerator:function(){return S.Get(bb.concat(this.data));},GetEnumerator0:function(){return S.Get(bb.concat(this.data));}},f,C);C.New$3=bO.Ctor(function(){C.New$4.call(this,[],x.Equals,x.Hash);},C);C.New$4=bO.Ctor(function(bT,bU,bV){var bW;f.New.call(this);this.equals=bU;this.hash=bV;this.data=[];this.count=0;bW=S.Get(bT);try{while(bW.MoveNext())this.add(bW.Current());}finally{if(typeof bW=="object"&&"Dispose"in bW)bW.Dispose();}},C);C.New$2=bO.Ctor(function(bT){C.New$4.call(this,bT,x.Equals,x.Hash);},C);D.Box=a.id;E.append=function(bT,bU){return{GetEnumerator:function(){var bV,bW;bV=S.Get(bT);bW=[true];return new T.New(bV,null,function(bX){var bY;return bX.s.MoveNext()?(bX.c=bX.s.Current(),true):(bY=bX.s,!x.Equals(bY,null)?bY.Dispose():void 0,bX.s=null,bW[0]&&(bW[0]=false,bX.s=S.Get(bU),bX.s.MoveNext()?(bX.c=bX.s.Current(),true):(bX.s.Dispose(),bX.s=null,false)));},function(bX){var bY;bY=bX.s;!x.Equals(bY,null)?bY.Dispose():void 0;});}};};E.head=function(bT){var bU;bU=S.Get(bT);try{return bU.MoveNext()?bU.Current():E.insufficient();}finally{if(typeof bU=="object"&&"Dispose"in bU)bU.Dispose();}};E.fold=function(bT,bU,bV){var bW,bX;bW=bU;bX=S.Get(bV);try{while(bX.MoveNext())bW=bT(bW,bX.Current());return bW;}finally{if(typeof bX=="object"&&"Dispose"in bX)bX.Dispose();}};E.distinctBy=function(bT,bU){return{GetEnumerator:function(){var bV,bW;bV=S.Get(bU);bW=new C.New$3();return new T.New(null,null,function(bX){var bY,bZ;if(bV.MoveNext()){bY=bV.Current();bZ=bW.Add(bT(bY));while(!bZ&&bV.MoveNext()){bY=bV.Current();bZ=bW.Add(bT(bY));}return bZ&&(bX.c=bY,true);}else return false;},function(){bV.Dispose();});}};};E.iter=function(bT,bU){var bV;bV=S.Get(bU);try{while(bV.MoveNext())bT(bV.Current());}finally{if(typeof bV=="object"&&"Dispose"in bV)bV.Dispose();}};E.map=function(bT,bU){return{GetEnumerator:function(){var bV;bV=S.Get(bU);return new T.New(null,null,function(bW){return bV.MoveNext()&&(bW.c=bT(bV.Current()),true);},function(){bV.Dispose();});}};};E.forall=function(bT,bU){return!E.exists(function(bV){return!bT(bV);},bU);};E.max=function(bT){var bU,bV,bW;bU=S.Get(bT);try{if(!bU.MoveNext())E.seqEmpty();bV=bU.Current();while(bU.MoveNext()){bW=bU.Current();x.Compare(bW,bV)===1?bV=bW:void 0;}return bV;}finally{if(typeof bU=="object"&&"Dispose"in bU)bU.Dispose();}};E.exists=function(bT,bU){var bV,bW;bV=S.Get(bU);try{bW=false;while(!bW&&bV.MoveNext())bW=bT(bV.Current());return bW;}finally{if(typeof bV=="object"&&"Dispose"in bV)bV.Dispose();}};E.seqEmpty=function(){return i.FailWith("The input sequence was empty.");};n.choose=function(bT,bU){var bV,bW,bX,bY;bV=[];for(bW=0,bX=bU.length-1;bW<=bX;bW++){bY=bT(bU[bW]);bY==null?void 0:bV.push(bY.$0);}return bV;};n.tryFindIndex=function(bT,bU){var bV,bW;bV=null;bW=0;while(bW<bU.length&&bV==null){bT(bU[bW])?bV={$:1,$0:bW}:void 0;bW=bW+1;}return bV;};n.tryPick=function(bT,bU){var bV,bW,bX;bV=null;bW=0;while(bW<bU.length&&bV==null){bX=bT(bU[bW]);bX!=null&&bX.$==1?bV=bX:void 0;bW=bW+1;}return bV;};n.exists=function(bT,bU){var bV,bW,bX,bY;bV=false;bW=0;bY=n.length(bU);while(!bV&&bW<bY)if(bT(bU[bW]))bV=true;else bW=bW+1;return bV;};n.concat=function(bT){return a.Array.prototype.concat.apply([],n.ofSeq(bT));};n.ofSeq=function(bT){var bU,bV;if(bT instanceof a.Array)return bT.slice();else if(bT instanceof bj)return n.ofList(bT);else{bU=[];bV=S.Get(bT);try{while(bV.MoveNext())bU.push(bV.Current());return bU;}finally{if(typeof bV=="object"&&"Dispose"in bV)bV.Dispose();}}};n.foldBack=function(bT,bU,bV){var bW,bX,bY,bZ,b0;bW=bV;bY=bU.length;for(bZ=1,b0=bY;bZ<=b0;bZ++)bW=bT(bU[bY-bZ],bW);return bW;};n.iter=function(bT,bU){var bV,bW;for(bV=0,bW=bU.length-1;bV<=bW;bV++)bT(bU[bV]);};n.map=function(bT,bU){var bV,bW,bX;bV=new a.Array(bU.length);for(bW=0,bX=bU.length-1;bW<=bX;bW++)bV[bW]=bT(bU[bW]);return bV;};n.filter=function(bT,bU){var bV,bW,bX;bV=[];for(bW=0,bX=bU.length-1;bW<=bX;bW++)if(bT(bU[bW]))bV.push(bU[bW]);return bV;};n.ofList=function(bT){var bU,bV;bV=[];bU=bT;while(!(bU.$==0)){bV.push(bi.head(bU));bU=bi.tail(bU);}return bV;};n.pick=function(bT,bU){var bV;bV=n.tryPick(bT,bU);return bV==null?i.FailWith("KeyNotFoundException"):bV.$0;};n.forall=function(bT,bU){var bV,bW,bX,bY;bV=true;bW=0;bY=n.length(bU);while(bV&&bW<bY)if(bT(bU[bW]))bW=bW+1;else bV=false;return bV;};n.create=function(bT,bU){var bV,bW,bX;bV=new a.Array(bT);for(bW=0,bX=bT-1;bW<=bX;bW++)bV[bW]=bU;return bV;};n.init=function(bT,bU){var bV,bW,bX;bT<0?i.FailWith("Negative size given."):null;bV=new a.Array(bT);for(bW=0,bX=bT-1;bW<=bX;bW++)bV[bW]=bU(bW);return bV;};G.LoadLocalTemplates=function(bT){!G.LocalTemplatesLoaded()?(G.set_LocalTemplatesLoaded(true),G.LoadNestedTemplates(self.document.body,"")):void 0;G.LoadedTemplates().set_Item(bT,G.LoadedTemplateFile(""));};G.NamedTemplate=function(bT,bU,bV){var bW,bX;bW=(bX=null,[G.LoadedTemplateFile(bT).TryGetValue(bU==null?"":bU.$0,{get:function(){return bX;},set:function(bY){bX=bY;}}),bX]);return bW[0]?G.ChildrenTemplate(bW[1].cloneNode(true),bV):(bP.warn("Local template doesn't exist",bU),H.get_Empty());};G.LocalTemplatesLoaded=function(){Y.$cctor();return Y.LocalTemplatesLoaded;};G.set_LocalTemplatesLoaded=function(bT){Y.$cctor();Y.LocalTemplatesLoaded=bT;};G.LoadNestedTemplates=function(bT,bU){var bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9;function bV(b_){var b$,ca;if(!bW.ContainsKey(b_)){b$=(ca=null,[bX.TryGetValue(b_,{get:function(){return ca;},set:function(cb){ca=cb;}}),ca]);b$[0]?(b9.Add(b_),bX.Remove(b_),G.PrepareTemplateStrict(bU,{$:1,$0:b_},b$[1][0],{$:1,$0:b$[1][1]},{$:1,$0:bV})):bP.warn(b9.Contains(b_)?"Encountered loop when instantiating "+b_:"Local template does not exist: "+b_);}}bW=G.LoadedTemplateFile(bU);bX=new B.New$5();bY=bT.querySelectorAll("[ws-template]");for(bZ=0,b0=bY.length-1;bZ<=b0;bZ++){b1=bY[bZ];b2=b1.getAttribute("ws-template").toLowerCase();b1.removeAttribute("ws-template");bX.set_Item(b2,[[b1],G.FakeRootSingle(b1)]);}b3=bT.querySelectorAll("[ws-children-template]");for(b4=0,b5=b3.length-1;b4<=b5;b4++){b6=b3[b4];b7=b6.getAttribute("ws-children-template").toLowerCase();b6.removeAttribute("ws-children-template");bX.set_Item(b7,(b8=X.ChildrenArray(b6),[b8,G.FakeRoot(b8)]));}b9=new C.New$3();while(bX.count>0)bV(E.head(bX.get_Keys()));};G.LoadedTemplates=function(){Y.$cctor();return Y.LoadedTemplates;};G.LoadedTemplateFile=function(bT){var bU,bV,bW;bU=(bV=null,[G.LoadedTemplates().TryGetValue(bT,{get:function(){return bV;},set:function(bX){bV=bX;}}),bV]);return bU[0]?bU[1]:(bW=new B.New$5(),(G.LoadedTemplates().set_Item(bT,bW),bW));};G.ChildrenTemplate=function(bT,bU){var bV,bW,bX,bY,bZ;bV=G.InlineTemplate(bT,bU);bW=bV[1];bX=bV[0];bY=bX.Els;return!x.Equals(bY,null)&&bY.length===1&&(n.get(bY,0)instanceof V&&(x.Equals(n.get(bY,0).nodeType,V.ELEMENT_NODE)&&(bZ=n.get(bY,0),true)))?_6.TreeNode(bX,bW):H.Mk({$:6,$0:bX},bW);};G.FakeRootSingle=function(bT){var bU,bV,bW;bT.removeAttribute("ws-template");bU=bT.getAttribute("ws-replace");bU===null?void 0:(bT.removeAttribute("ws-replace"),bV=bT.parentNode,x.Equals(bV,null)?void 0:(bW=self.document.createElement(bT.tagName),bW.setAttribute("ws-replace",bU),bV.replaceChild(bW,bT)));return G.FakeRoot([bT]);};G.FakeRoot=function(bT){var bU,bV,bW;bU=self.document.createElement("div");for(bV=0,bW=bT.length-1;bV<=bW;bV++)bU.appendChild(n.get(bT,bV));return bU;};G.PrepareTemplateStrict=function(bT,bU,bV,bW,bX){var bY,bZ;function b0(b5,b6){var b7,b8,b9,b_,b$,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu,cv;function ca(cw){}while(true)switch(b5){case 0:if(b6!==null){b7=b6.nextSibling;if(x.Equals(b6.nodeType,V.TEXT_NODE))_7.convertTextNode(b6);else if(x.Equals(b6.nodeType,V.ELEMENT_NODE))b2(b6);b6=b7;}else return null;break;case 1:cb=_8.string(b6.nodeName,{$:1,$0:3},null).toLowerCase();cc=(b8=cb.indexOf("."),b8===-1?[bT,cb]:[_8.string(cb,null,{$:1,$0:b8-1}),_8.string(cb,{$:1,$0:b8+1},null)]);cd=cc[1];ce=cc[0];if(ce!==""&&!G.LoadedTemplates().ContainsKey(ce))return _7.failNotLoaded(cd);else{if(ce===""&&bX!=null)bX.$0(cd);cf=G.LoadedTemplates().get_Item(ce);if(!cf.ContainsKey(cd))return _7.failNotLoaded(cd);else{cg=cf.get_Item(cd);ch=cg.cloneNode(true);ci=new C.New$3();cj=new B.New$5();ck=b6.attributes;for(cl=0,cm=ck.length-1;cl<=cm;cl++){cn=ck.item(cl).name.toLowerCase();cj.set_Item(cn,(co=ck.item(cl).nodeValue,co===""?cn:co.toLowerCase()));!ci.Add(cn)?bP.warn("Hole mapped twice",cn):void 0;}for(cp=0,cq=b6.childNodes.length-1;cp<=cq;cp++){cr=b6.childNodes[cp];x.Equals(cr.nodeType,V.ELEMENT_NODE)?!ci.Add(cr.nodeName.toLowerCase())?bP.warn("Hole filled twice",cd):void 0:void 0;}cs=b6.childNodes.length===1&&x.Equals(b6.firstChild.nodeType,V.TEXT_NODE);if(cs){b_=_7.fillTextHole(ch,b6.firstChild.textContent,cd);((function(cw){return function(cx){if(cx!=null)cw(cx.$0);};}((b$=function(cw){return function(cx){return cw.Add(cx);};}(ci),function(cw){return ca(b$(cw));})))(b_));}_7.removeHolesExcept(ch,ci);if(!cs){for(ct=0,cu=b6.childNodes.length-1;ct<=cu;ct++){cv=b6.childNodes[ct];x.Equals(cv.nodeType,V.ELEMENT_NODE)?cv.hasAttributes()?_7.fillInstanceAttrs(ch,cv):b1(ch,cv):void 0;}}_7.mapHoles(ch,cj);_7.fill(ch,b6.parentNode,b6);b6.parentNode.removeChild(b6);return;}}break;}}function b1(b5,b6){var b7,b9,b_;function b8(b$,ca){var cb,cc,cd;if(b9==="title"&&b6.hasChildNodes()){cb=bR.parseHTML(b6.textContent);b6.removeChild(b6.firstChild);for(cc=0,cd=cb.length-1;cc<=cd;cc++)b6.appendChild(n.get(cb,cc));}else null;b2(b6);return _7.fill(b6,b$,ca);}b9=b6.nodeName.toLowerCase();X.IterSelector(b5,"[ws-attr-holes]",function(b$){var ca,cb,cc,cd,ce;ca=bk.SplitChars(b$.getAttribute("ws-attr-holes"),[" "],1);for(cb=0,cc=ca.length-1;cb<=cc;cb++){cd=n.get(ca,cb);b$.setAttribute(cd,(ce=new a.RegExp("\\${"+b9+"}","ig"),b$.getAttribute(cd).replace(ce,b6.textContent)));}});b_=b5.querySelector("[ws-hole="+b9+"]");if(x.Equals(b_,null)){b7=b5.querySelector("[ws-replace="+b9+"]");return x.Equals(b7,null)?null:(b8(b7.parentNode,b7),void b7.parentNode.removeChild(b7));}else{while(b_.hasChildNodes())b_.removeChild(b_.lastChild);b_.removeAttribute("ws-hole");return b8(b_,null);}}function b2(b5){if(bk.StartsWith(b5.nodeName.toLowerCase(),"ws-"))b4(b5);else{_7.convertAttrs(b5);b3(b5.firstChild);}}function b3(b5){return b0(0,b5);}function b4(b5){return b0(1,b5);}bY=bW==null?G.FakeRoot(bV):bW.$0;bZ=(bU==null?"":bU.$0).toLowerCase();G.LoadedTemplateFile(bT).set_Item(bZ,bY);n.length(bV)>0?(function(b5){var b6,b7,b8,b9;while(true){b6=b5.querySelector("[ws-template]");if(x.Equals(b6,null)){b7=b5.querySelector("[ws-children-template]");if(x.Equals(b7,null))return null;else{b8=b7.getAttribute("ws-children-template");b7.removeAttribute("ws-children-template");G.PrepareTemplateStrict(bT,{$:1,$0:b8},X.ChildrenArray(b7),null,null);b5=b5;}}else{b9=b6.getAttribute("ws-template");(G.PrepareSingleTemplate(bT,{$:1,$0:b9},b6))(null);b5=b5;}}}(bY),b3(n.get(bV,0))):void 0;};G.InlineTemplate=function(bT,bU){var bV,bW,bX,bY,b1,b2,b3,b4,b5,b6,b7;function bZ(b8,b9){var b_,b$,ca;b_=bg.Insert(b8,b9);b2.push(bg.Updates(b_));b3.push([b8,b_]);b$=bO.GetOptional(b_.OnAfterRender);return b$==null?null:(ca=b$.$0,void b4.push(function(){ca(b8);}));}function b0(b8){var b9,b_;b9=(b_=null,[b5.TryGetValue(b8,{get:function(){return b_;},set:function(b$){b_=b$;}}),b_]);return b9[0]?b9[1].$==0?{$:1,$0:b9[1].$1}:b9[1].$==1?{$:1,$0:H.TextNode(b9[1].$1)}:b9[1].$==2?{$:1,$0:H.TextView(b9[1].$1)}:b9[1].$==8?{$:1,$0:H.TextView(b9[1].$1.get_View())}:b9[1].$==9?{$:1,$0:H.TextView(N.Map(a.String,b9[1].$1.get_View()))}:b9[1].$==10?{$:1,$0:H.TextView(N.Map(function(b$){return b$.get_Input();},b9[1].$1.get_View()))}:b9[1].$==11?{$:1,$0:H.TextView(N.Map(a.String,b9[1].$1.get_View()))}:b9[1].$==12?{$:1,$0:H.TextView(N.Map(function(b$){return b$.get_Input();},b9[1].$1.get_View()))}:b9[1].$==13?{$:1,$0:H.TextView(N.Map(a.String,b9[1].$1.get_View()))}:(bP.warn("Content hole filled with attribute data",b8),null):null;}b1=[];b2=[];b3=[];b4=[];b5=new B.New$5();b6=S.Get(bU);try{while(b6.MoveNext()){b7=b6.Current();b5.set_Item(b7.$0,b7);}}finally{if(typeof b6=="object"&&"Dispose"in b6)b6.Dispose();}bV=X.ChildrenArray(bT);X.IterSelector(bT,"[ws-hole]",function(b8){var b9,b_,b$;b$=b8.getAttribute("ws-hole");b8.removeAttribute("ws-hole");while(b8.hasChildNodes())b8.removeChild(b8.lastChild);b9=b0(b$);b9!=null&&b9.$==1?(b_=b9.$0,_1.LinkElement(b8,b_.docNode),b1.push(_3.New(bg.Empty(b8),b_.docNode,null,b8,L.Int(),null)),b2.push(b_.updates)):void 0;});X.IterSelector(bT,"[ws-replace]",function(b8){var b9,b_,b$,ca,cb,cc;b9=b0(b8.getAttribute("ws-replace"));b9!=null&&b9.$==1?(b_=b9.$0,b$=b8.parentNode,ca=self.document.createTextNode(""),b$.replaceChild(ca,b8),cb=_1.InsertBeforeDelim(ca,b_.docNode),cc=n.tryFindIndex(function(cd){return b8===cd;},bV),cc==null?void 0:n.set(bV,cc.$0,b_.docNode),b1.push(_3.New(bg.Empty(b$),b_.docNode,{$:1,$0:[cb,ca]},b$,L.Int(),null)),b2.push(b_.updates)):void 0;});X.IterSelector(bT,"[ws-attr]",function(b8){var b9,b_,b$;b9=b8.getAttribute("ws-attr");b8.removeAttribute("ws-attr");b_=(b$=null,[b5.TryGetValue(b9,{get:function(){return b$;},set:function(ca){b$=ca;}}),b$]);b_[0]?b_[1].$==3?bZ(b8,b_[1].$1):bP.warn("Attribute hole filled with non-attribute data",b9):void 0;});X.IterSelector(bT,"[ws-on]",function(b8){bZ(b8,O.Concat(n.choose(function(b9){var b_,b$,ca;b_=bk.SplitChars(b9,[":"],1);b$=(ca=null,[b5.TryGetValue(n.get(b_,1),{get:function(){return ca;},set:function(cb){ca=cb;}}),ca]);return b$[0]?b$[1].$==4?{$:1,$0:bh.Handler(n.get(b_,0),b$[1].$1)}:b$[1].$==5?{$:1,$0:O.Handler(n.get(b_,0),b$[1].$2)}:(bP.warn("Event hole on"+n.get(b_,0)+" filled with non-event data",n.get(b_,1)),null):null;},bk.SplitChars(b8.getAttribute("ws-on"),[" "],1))));b8.removeAttribute("ws-on");});X.IterSelector(bT,"[ws-onafterrender]",function(b8){var b9,b_,b$;b9=b8.getAttribute("ws-onafterrender");b_=(b$=null,[b5.TryGetValue(b9,{get:function(){return b$;},set:function(ca){b$=ca;}}),b$]);b_[0]?b_[1].$==6?(b8.removeAttribute("ws-onafterrender"),bZ(b8,bh.OnAfterRender(b_[1].$1))):b_[1].$==7?(b8.removeAttribute("ws-onafterrender"),bZ(b8,bh.OnAfterRender(b_[1].$1))):bP.warn("onafterrender hole filled with non-onafterrender data",b9):void 0;});X.IterSelector(bT,"[ws-var]",function(b8){var b9,b_,b$;b9=b8.getAttribute("ws-var");b8.removeAttribute("ws-var");b_=(b$=null,[b5.TryGetValue(b9,{get:function(){return b$;},set:function(ca){b$=ca;}}),b$]);b_[0]?b_[1].$==8?bZ(b8,bh.Value(b_[1].$1)):b_[1].$==9?bZ(b8,bh.Checked(b_[1].$1)):b_[1].$==10?bZ(b8,bh.IntValue(b_[1].$1)):b_[1].$==11?bZ(b8,bh.IntValueUnchecked(b_[1].$1)):b_[1].$==12?bZ(b8,bh.FloatValue(b_[1].$1)):b_[1].$==13?bZ(b8,bh.FloatValueUnchecked(b_[1].$1)):bP.warn("Var hole filled with non-Var data",b9):void 0;});X.IterSelector(bT,"[ws-attr-holes]",function(b8){var b9,b_,b$,ca;b9=new a.RegExp(G.TextHoleRE(),"g");b_=bk.SplitChars(b8.getAttribute("ws-attr-holes"),[" "],1);b8.removeAttribute("ws-attr-holes");for(b$=0,ca=b_.length-1;b$<=ca;b$++)(function(){var cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn;ck=n.get(b_,b$);cl=b8.getAttribute(ck);cb=null;cc=0;cm=[];while(cb=b9.exec(cl),cb!==null){cn=_8.string(cl,{$:1,$0:cc},{$:1,$0:b9.lastIndex-n.get(cb,0).length-1});cc=b9.lastIndex;cm.push([cn,n.get(cb,1)]);}ce=_8.string(cl,{$:1,$0:cc},null);b9.lastIndex=0;cf=n.foldBack(function(co,cp){return(function(cq){var cr,cs;cr=cq[0];cs=cq[1];return function(ct){var cu,cv,cw,cx,cy;cu=ct[0];cv=ct[1];cw=(cx=(cy=null,[b5.TryGetValue(cs,{get:function(){return cy;},set:function(cz){cy=cz;}}),cy]),cx[0]?cx[1].$==1?{$:0,$0:cx[1].$1}:cx[1].$==2?{$:1,$0:cx[1].$1}:cx[1].$==8?{$:1,$0:cx[1].$1.get_View()}:cx[1].$==9?{$:1,$0:N.Map(a.String,cx[1].$1.get_View())}:cx[1].$==10?{$:1,$0:N.Map(function(cz){return cz.get_Input();},cx[1].$1.get_View())}:cx[1].$==11?{$:1,$0:N.Map(a.String,cx[1].$1.get_View())}:cx[1].$==12?{$:1,$0:N.Map(function(cz){return cz.get_Input();},cx[1].$1.get_View())}:cx[1].$==13?{$:1,$0:N.Map(a.String,cx[1].$1.get_View())}:(bP.warn("Attribute value hole filled with non-text data",cs),{$:0,$0:""}):{$:0,$0:""});return cw.$==1?[cr,new bj({$:1,$0:cu===""?cw.$0:N.Map(function(cz){return cz+cu;},cw.$0),$1:cv})]:[cr+cw.$0+cu,cv];};}(co))(cp);},cm,[ce,bj.Empty]);return bZ(b8,cf[1].$==1?cf[1].$1.$==1?cf[1].$1.$1.$==1?cf[1].$1.$1.$1.$==0?(cg=cf[0],bh.Dynamic(ck,N.Map3(function(co,cp,cq){return cg+co+cp+cq;},cf[1].$0,cf[1].$1.$0,cf[1].$1.$1.$0))):(ch=cf[0],bh.Dynamic(ck,N.Map(function(co){return ch+bk.concat("",co);},N.Sequence(cf[1])))):(ci=cf[0],bh.Dynamic(ck,N.Map2(function(co,cp){return ci+co+cp;},cf[1].$0,cf[1].$1.$0))):cf[0]===""?bh.Dynamic(ck,cf[1].$0):(cj=cf[0],bh.Dynamic(ck,N.Map(function(co){return cj+co;},cf[1].$0))):O.Create(ck,cf[0]));}());});return[bO.DeleteEmptyFields({Els:bV,Dirty:true,Holes:b1,Attrs:b3,Render:(bW=b4.length==0?null:{$:1,$0:function(b8){n.iter(function(b9){b9(b8);},b4);}},bW?bW.$0:void 0),El:(bX=!x.Equals(bV,null)&&bV.length===1&&(n.get(bV,0)instanceof V&&(n.get(bV,0)instanceof a.Element&&(bY=n.get(bV,0),true)))?{$:1,$0:bY}:null,bX?bX.$0:void 0)},["Render","El"]),be.TreeReduce(N.Const(),N.Map2Unit,b2)];};G.PrepareSingleTemplate=function(bT,bU,bV){var bW,bX,bY;bW=G.FakeRootSingle(bV);bX=[bV];bY={$:1,$0:bW};return function(bZ){G.PrepareTemplateStrict(bT,bU,bX,bY,bZ);};};G.TextHoleRE=function(){Y.$cctor();return Y.TextHoleRE;};H=g.Doc=bO.Class({},f,H);H.RunById=function(bT,bU){var bV;bV=X.Doc().getElementById(bT);x.Equals(bV,null)?i.FailWith("invalid id: "+bT):H.Run(bV,bU);};H.Convert=function(bT,bU){return H.Flatten(N.MapSeqCached(bT,bU));};H.Run=function(bT,bU){_1.LinkElement(bT,bU.docNode);H.RunInPlace(false,bT,bU);};H.Flatten=function(bT){return H.EmbedView(N.Map(H.Concat,bT));};H.get_Empty=function(){return H.Mk(null,N.Const());};H.RunInPlace=function(bT,bU,bV){var bW;bW=_1.CreateRunState(bU,bV.docNode);N.Sink(_.get_UseAnimations()||$.BatchUpdatesEnabled()?ba.StartProcessor(_1.PerformAnimatedUpdate(bT,bW,bV.docNode)):function(){_1.PerformSyncUpdate(bT,bW,bV.docNode);},bV.updates);};H.Concat=function(bT){var bU;bU=be.ofSeqNonCopying(bT);return be.TreeReduce(H.get_Empty(),H.Append,bU);};H.EmbedView=function(bT){var bU;bU=_1.CreateEmbedNode();return H.Mk({$:2,$0:bU},N.Map(a.ignore,N.Bind(function(bV){_1.UpdateEmbedNode(bU,bV.docNode);return bV.updates;},bT)));};H.Mk=function(bT,bU){return new H.New(bT,bU);};H.Append=function(bT,bU){return H.Mk({$:0,$0:bT.docNode,$1:bU.docNode},N.Map2Unit(bT.updates,bU.updates));};H.TextNode=function(bT){return H.Mk({$:5,$0:X.CreateText(bT)},N.Const());};H.TextView=function(bT){var bU;bU=_1.CreateTextNode();return H.Mk({$:4,$0:bU},N.Map(function(bV){_1.UpdateTextNode(bU,bV);},bT));};H.New=bO.Ctor(function(bT,bU){f.New.call(this);this.docNode=bT;this.updates=bU;},H);J.NewFromSeq=function(bT){var bU,bV,bW;bU={};bV=S.Get(bT);try{while(bV.MoveNext()){bW=bV.Current();bU[bW[0]]=bW[1];}}finally{if(typeof bV=="object"&&"Dispose"in bV)bV.Dispose();}return bU;};L.Int=function(){L.set_counter(L.counter()+1);return L.counter();};L.set_counter=function(bT){_2.$cctor();_2.counter=bT;};L.counter=function(){_2.$cctor();return _2.counter;};N=g.View=bO.Class({},null,N);u.Obsolete=function(bT){var bU,bV,bW,bX,bY;bV=bT.s;if(bV==null||(bV!=null&&bV.$==2?(bU=bV.$1,false):bV!=null&&bV.$==3?(bU=bV.$1,false):true))void 0;else{bT.s=null;for(bW=0,bX=n.length(bU)-1;bW<=bX;bW++){bY=n.get(bU,bW);typeof bY=="object"?function(bZ){u.Obsolete(bZ);}(bY):bY();}}};u.New=function(bT){return{s:bT};};p.FromSeq=function(bT){return p.Create(a.id,bT);};p.Create=function(bT,bU){return p.CreateWithStorage(bT,_5.InMemory(n.ofSeq(bU)));};p.CreateWithStorage=function(bT,bU){return new p.New(bT,bU);};O=g.AttrProxy=bO.Class({},null,O);O.Handler=function(bT,bU){return O.HandlerImpl(bT,bU);};O.Concat=function(bT){var bU;bU=be.ofSeqNonCopying(bT);return be.TreeReduce(bg.EmptyAttr(),O.Append,bU);};O.Create=function(bT,bU){return bg.Static(function(bV){X.SetAttr(bV,bT,bU);});};O.HandlerImpl=function(bT,bU){return bg.Static(function(bV){bV.addEventListener(bT,function(bW){return(bU(bV))(bW);},false);});};O.Append=function(bT,bU){return bg.AppendTree(bT,bU);};P=g.CheckedInput=bO.Class({get_Input:function(){return this.$==1?this.$0:this.$==2?this.$0:this.$1;}},null,P);Q.TryParseInt32=function(bT,bU){return Q.TryParse(bT,-2147483648,2147483647,bU);};R.notPresent=function(){return i.FailWith("The given key was not present in the dictionary.");};S.Get=function(bT){return bT instanceof a.Array?S.ArrayEnumerator(bT):x.Equals(typeof bT,"string")?S.StringEnumerator(bT):bT.GetEnumerator();};S.ArrayEnumerator=function(bT){return new T.New(0,null,function(bU){var bV;bV=bU.s;return bV<n.length(bT)&&(bU.c=n.get(bT,bV),bU.s=bV+1,true);},void 0);};S.StringEnumerator=function(bT){return new T.New(0,null,function(bU){var bV;bV=bU.s;return bV<bT.length&&(bU.c=bT[bV],bU.s=bV+1,true);},void 0);};S.Get0=function(bT){return bT instanceof a.Array?S.ArrayEnumerator(bT):x.Equals(typeof bT,"string")?S.StringEnumerator(bT):"GetEnumerator0"in bT?bT.GetEnumerator0():bT.GetEnumerator();};T=S.T=bO.Class({MoveNext:function(){return this.n(this);},Current:function(){return this.c;},Dispose:function(){if(this.d)this.d(this);}},f,T);T.New=bO.Ctor(function(bT,bU,bV,bW){f.New.call(this);this.s=bT;this.c=bU;this.n=bV;this.d=bW;},T);W.GetFieldValues=function(bT){var bU,bV;bU=[];for(var bW in bT)bU.push(bT[bW]);return bU;};X.Doc=function(){_0.$cctor();return _0.Doc;};X.ChildrenArray=function(bT){var bU,bV,bW;bU=[];for(bV=0,bW=bT.childNodes.length-1;bV<=bW;bV++)bU.push(bT.childNodes[bV]);return bU;};X.IterSelector=function(bT,bU,bV){var bW,bX,bY;bW=bT.querySelectorAll(bU);for(bX=0,bY=bW.length-1;bX<=bY;bX++)bV(bW[bX]);};X.CreateText=function(bT){return X.Doc().createTextNode(bT);};X.SetAttr=function(bT,bU,bV){bT.setAttribute(bU,bV);};X.InsertAt=function(bT,bU,bV){var bW;if(!(bV.parentNode===bT&&bU===(bW=bV.nextSibling,x.Equals(bW,null)?null:bW)))bT.insertBefore(bV,bU);};X.RemoveNode=function(bT,bU){if(bU.parentNode===bT)bT.removeChild(bU);};N.MapSeqCached=function(bT,bU){return N.MapSeqCachedBy(a.id,bT,bU);};N.MapSeqCachedBy=function(bT,bU,bV){var bW;bW=[new B.New$5()];return N.Map(function(bX){var bY,bZ,b0;bY=bW[0];bZ=new B.New$5();b0=be.mapInPlace(function(b1){var b2,b3;b2=bT(b1);b3=bY.ContainsKey(b2)?bY.get_Item(b2):bU(b1);bZ.set_Item(b2,b3);return b3;},n.ofSeq(bX));bW[0]=bZ;return b0;},bV);};N.Map=function(bT,bU){return N.CreateLazy(function(){return u.Map(bT,bU());});};N.Const=function(bT){var bU;bU=u.New({$:0,$0:bT});return function(){return bU;};};N.Sink=function(bT,bU){function bV(){u.WhenRun(bU(),bT,function(){bt.scheduler().Fork(bV);});}bt.scheduler().Fork(bV);};N.CreateLazy=function(bT){var bU;bU={c:null,o:bT};return function(){var bV,bW;bV=bU.c;return bV===null?(bV=bU.o(),bU.c=bV,(bW=bV.s,bW!=null&&bW.$==0)?bU.o=null:u.WhenObsoleteRun(bV,function(){bU.c=null;}),bV):bV;};};N.Bind=function(bT,bU){return N.Join(N.Map(bT,bU));};N.Map3=function(bT,bU,bV,bW){return N.CreateLazy(function(){return u.Map3(bT,bU(),bV(),bW());});};N.Sequence=function(bT){return N.CreateLazy(function(){return u.Sequence(E.map(function(bU){return bU();},bT));});};N.Map2=function(bT,bU,bV){return N.CreateLazy(function(){return u.Map2(bT,bU(),bV());});};N.Map2Unit=function(bT,bU){return N.CreateLazy(function(){return u.Map2Unit(bT(),bU());});};N.Join=function(bT){return N.CreateLazy(function(){return u.Join(bT());});};Y.$cctor=function(){Y.$cctor=a.ignore;Y.LoadedTemplates=new B.New$5();Y.LocalTemplatesLoaded=false;Y.TextHoleRE="\\${([^}]+)}";};_0.$cctor=function(){_0.$cctor=a.ignore;_0.Doc=self.document;};_1.LinkElement=function(bT,bU){_1.InsertDoc(bT,bU,null);};_1.InsertDoc=function(bT,bU,bV){var bW;return bU!=null&&bU.$==1?_1.InsertNode(bT,bU.$0.El,bV):bU!=null&&bU.$==2?(bW=bU.$0,(bW.Dirty=false,_1.InsertDoc(bT,bW.Current,bV))):bU==null?bV:bU!=null&&bU.$==4?_1.InsertNode(bT,bU.$0.Text,bV):bU!=null&&bU.$==5?_1.InsertNode(bT,bU.$0,bV):bU!=null&&bU.$==6?n.foldBack(function(bX,bY){return bX==null||bX.constructor===M?_1.InsertDoc(bT,bX,bY):_1.InsertNode(bT,bX,bY);},bU.$0.Els,bV):_1.InsertDoc(bT,bU.$0,_1.InsertDoc(bT,bU.$1,bV));};_1.CreateRunState=function(bT,bU){return bn.New(bo.get_Empty(),_1.CreateElemNode(bT,bg.EmptyAttr(),bU));};_1.PerformAnimatedUpdate=function(bT,bU,bV){var bW;return _.get_UseAnimations()?(bW=null,bt.Delay(function(){var bX,bY,bZ;bX=bo.FindAll(bV);bY=_1.ComputeChangeAnim(bU,bX);bZ=_1.ComputeEnterAnim(bU,bX);return bt.Bind(_.Play(_.Append(bY,_1.ComputeExitAnim(bU,bX))),function(){return bt.Bind(_1.SyncElemNodesNextFrame(bT,bU),function(){return bt.Bind(_.Play(bZ),function(){bU.PreviousNodes=bX;return bt.Return(null);});});});})):_1.SyncElemNodesNextFrame(bT,bU);};_1.PerformSyncUpdate=function(bT,bU,bV){var bW;bW=bo.FindAll(bV);_1.SyncElemNode(bT,bU.Top);bU.PreviousNodes=bW;};_1.CreateEmbedNode=function(){return{Current:null,Dirty:false};};_1.UpdateEmbedNode=function(bT,bU){bT.Current=bU;bT.Dirty=true;};_1.InsertBeforeDelim=function(bT,bU){var bV,bW;bV=bT.parentNode;bW=self.document.createTextNode("");bV.insertBefore(bW,bT);_1.LinkPrevElement(bT,bU);return bW;};_1.InsertNode=function(bT,bU,bV){X.InsertAt(bT,bV,bU);return bU;};_1.CreateElemNode=function(bT,bU,bV){var bW;_1.LinkElement(bT,bV);bW=bg.Insert(bT,bU);return _3.New(bW,bV,null,bT,L.Int(),bO.GetOptional(bW.OnAfterRender));};_1.SyncElemNodesNextFrame=function(bT,bU){function bV(bW){a.requestAnimationFrame(function(){_1.SyncElemNode(bT,bU.Top);bW();});}return $.BatchUpdatesEnabled()?bt.FromContinuations(function(bW,bX,bY){return bV.apply(null,[bW,bX,bY]);}):(_1.SyncElemNode(bT,bU.Top),bt.Return(null));};_1.ComputeExitAnim=function(bT,bU){return _.Concat(n.map(function(bV){return bg.GetExitAnim(bV.Attr);},bo.ToArray(bo.Except(bU,bo.Filter(function(bV){return bg.HasExitAnim(bV.Attr);},bT.PreviousNodes)))));};_1.ComputeEnterAnim=function(bT,bU){return _.Concat(n.map(function(bV){return bg.GetEnterAnim(bV.Attr);},bo.ToArray(bo.Except(bT.PreviousNodes,bo.Filter(function(bV){return bg.HasEnterAnim(bV.Attr);},bU)))));};_1.ComputeChangeAnim=function(bT,bU){var bV;function bW(bX){return bg.HasChangeAnim(bX.Attr);}bV=function(bX){return bo.Filter(bW,bX);};return _.Concat(n.map(function(bX){return bg.GetChangeAnim(bX.Attr);},bo.ToArray(bo.Intersect(bV(bT.PreviousNodes),bV(bU)))));};_1.SyncElemNode=function(bT,bU){!bT?_1.SyncElement(bU):void 0;_1.Sync(bU.Children);_1.AfterRender(bU);};_1.CreateTextNode=function(){return{Text:X.CreateText(""),Dirty:false,Value:""};};_1.UpdateTextNode=function(bT,bU){bT.Value=bU;bT.Dirty=true;};_1.LinkPrevElement=function(bT,bU){_1.InsertDoc(bT.parentNode,bU,bT);};_1.SyncElement=function(bT){function bU(bV){function bW(bX){var bY,bZ;return bX!=null&&bX.$==0?bW(bX.$0)||bW(bX.$1):bX!=null&&bX.$==2?(bY=bX.$0,bY.Dirty||bW(bY.Current)):bX!=null&&bX.$==6&&(bZ=bX.$0,bZ.Dirty||n.exists(bU,bZ.Holes));}return bW(bV.Children);}bg.Sync(bT.El,bT.Attr);bU(bT)?_1.DoSyncElement(bT):void 0;};_1.Sync=function(bT){var bU,bV;if(bT!=null&&bT.$==1)_1.SyncElemNode(false,bT.$0);else if(bT!=null&&bT.$==2)_1.Sync(bT.$0.Current);else if(bT==null);else if(bT!=null&&bT.$==5);else if(bT!=null&&bT.$==4){bU=bT.$0;bU.Dirty?(bU.Text.nodeValue=bU.Value,bU.Dirty=false):void 0;}else if(bT!=null&&bT.$==6){bV=bT.$0;n.iter(function(bW){_1.SyncElemNode(false,bW);},bV.Holes);n.iter(function(bW){bg.Sync(bW[0],bW[1]);},bV.Attrs);_1.AfterRender(bV);}else{_1.Sync(bT.$0);_1.Sync(bT.$1);}};_1.AfterRender=function(bT){var bU;bU=bO.GetOptional(bT.Render);bU!=null&&bU.$==1?(bU.$0(bT.El),bO.SetOptional(bT,"Render",null)):void 0;};_1.DoSyncElement=function(bT){var bU,bV,bW;function bX(bY,bZ){var b0,b1;return bY!=null&&bY.$==1?bY.$0.El:bY!=null&&bY.$==2?(b0=bY.$0,b0.Dirty?(b0.Dirty=false,_1.InsertDoc(bU,b0.Current,bZ)):bX(b0.Current,bZ)):bY==null?bZ:bY!=null&&bY.$==4?bY.$0.Text:bY!=null&&bY.$==5?bY.$0:bY!=null&&bY.$==6?(b1=bY.$0,(b1.Dirty?b1.Dirty=false:void 0,n.foldBack(function(b2,b3){return b2==null||b2.constructor===M?bX(b2,b3):b2;},b1.Els,bZ))):bX(bY.$0,bX(bY.$1,bZ));}bU=bT.El;bF.Iter((bV=bT.El,function(bY){X.RemoveNode(bV,bY);}),bF.Except(bF.DocChildren(bT),bF.Children(bT.El,bO.GetOptional(bT.Delimiters))));bX(bT.Children,(bW=bO.GetOptional(bT.Delimiters),bW!=null&&bW.$==1?bW.$0[1]:null));};_2.$cctor=function(){_2.$cctor=a.ignore;_2.counter=0;};_3=g.DocElemNode=bO.Class({Equals:function(bT){return this.ElKey===bT.ElKey;},GetHashCode:function(){return this.ElKey;}},null,_3);_3.New=function(bT,bU,bV,bW,bX,bY){var bZ;return new _3((bZ={Attr:bT,Children:bU,El:bW,ElKey:bX},(bO.SetOptional(bZ,"Delimiters",bV),bO.SetOptional(bZ,"Render",bY),bZ)));};_5.InMemory=function(bT){return new bf.New(bT);};_6=g.Elt=bO.Class({},H,_6);_6.TreeNode=function(bT,bU){var bV,bW;function bX(bY){return bY[1];}bV=bl.Create(bU);return new _6.New$1({$:6,$0:bT},N.Map2Unit((bW=n.map(function(bY){return bg.Updates(bX(bY));},bT.Attrs),be.TreeReduce(N.Const(),N.Map2Unit,bW)),bV.v),n.get(bT.Els,0),bV);};_6.New$1=bO.Ctor(function(bT,bU,bV,bW){H.New.call(this,bT,bU);this.docNode$1=bT;this.updates$1=bU;this.elt=bV;this.rvUpdates=bW;},_6);_7.convertTextNode=function(bT){var bU,bV,bW,bX,bY,bZ;bU=null;bV=0;bX=bT.textContent;bY=new a.RegExp(G.TextHoleRE(),"g");while(bU=bY.exec(bX),bU!==null){bT.parentNode.insertBefore(self.document.createTextNode(_8.string(bX,{$:1,$0:bV},{$:1,$0:bY.lastIndex-n.get(bU,0).length-1})),bT);bV=bY.lastIndex;bZ=self.document.createElement("span");bZ.setAttribute("ws-replace",n.get(bU,1).toLowerCase());bT.parentNode.insertBefore(bZ,bT);}bY.lastIndex=0;bT.textContent=_8.string(bX,{$:1,$0:bV},null);};_7.failNotLoaded=function(bT){bP.warn("Instantiating non-loaded template",bT);};_7.fillTextHole=function(bT,bU,bV){var bW;bW=bT.querySelector("[ws-replace]");return x.Equals(bW,null)?(bP.warn("Filling non-existent text hole",bV),null):(bW.parentNode.replaceChild(new a.Text(bU),bW),{$:1,$0:bW.getAttribute("ws-replace")});};_7.removeHolesExcept=function(bT,bU){function bV(bW){X.IterSelector(bT,"["+bW+"]",function(bX){if(!bU.Contains(bX.getAttribute(bW)))bX.removeAttribute(bW);});}bV("ws-attr");bV("ws-onafterrender");bV("ws-var");X.IterSelector(bT,"[ws-hole]",function(bW){if(!bU.Contains(bW.getAttribute("ws-hole"))){bW.removeAttribute("ws-hole");while(bW.hasChildNodes())bW.removeChild(bW.lastChild);}});X.IterSelector(bT,"[ws-replace]",function(bW){if(!bU.Contains(bW.getAttribute("ws-replace")))bW.parentNode.removeChild(bW);});X.IterSelector(bT,"[ws-on]",function(bW){bW.setAttribute("ws-on",bk.concat(" ",n.filter(function(bX){return bU.Contains(n.get(bk.SplitChars(bX,[":"],1),1));},bk.SplitChars(bW.getAttribute("ws-on"),[" "],1))));});X.IterSelector(bT,"[ws-attr-holes]",function(bW){var bX,bY,bZ,b0,b1;bX=bk.SplitChars(bW.getAttribute("ws-attr-holes"),[" "],1);for(bY=0,bZ=bX.length-1;bY<=bZ;bY++){b0=n.get(bX,bY);bW.setAttribute(b0,(b1=new a.RegExp(G.TextHoleRE(),"g"),bW.getAttribute(b0).replace(b1,function(b2,b3){return bU.Contains(b3)?b2:"";})));}});};_7.fillInstanceAttrs=function(bT,bU){var bV,bW,bX,bY,bZ;_7.convertAttrs(bU);bV=bU.nodeName.toLowerCase();bW=bT.querySelector("[ws-attr="+bV+"]");if(x.Equals(bW,null))bP.warn("Filling non-existent attr hole",bV);else{bW.removeAttribute("ws-attr");for(bX=0,bY=bU.attributes.length-1;bX<=bY;bX++){bZ=bU.attributes.item(bX);bZ.name==="class"&&bW.hasAttribute("class")?bW.setAttribute("class",bW.getAttribute("class")+" "+bZ.nodeValue):bW.setAttribute(bZ.name,bZ.nodeValue);}}};_7.mapHoles=function(bT,bU){function bV(bW){X.IterSelector(bT,"["+bW+"]",function(bX){var bY,bZ;bY=(bZ=null,[bU.TryGetValue(bX.getAttribute(bW).toLowerCase(),{get:function(){return bZ;},set:function(b0){bZ=b0;}}),bZ]);bY[0]?bX.setAttribute(bW,bY[1]):void 0;});}bV("ws-hole");bV("ws-replace");bV("ws-attr");bV("ws-onafterrender");bV("ws-var");X.IterSelector(bT,"[ws-on]",function(bW){bW.setAttribute("ws-on",bk.concat(" ",n.map(function(bX){var bY,bZ,b0;bY=bk.SplitChars(bX,[":"],1);bZ=(b0=null,[bU.TryGetValue(n.get(bY,1),{get:function(){return b0;},set:function(b1){b0=b1;}}),b0]);return bZ[0]?n.get(bY,0)+":"+bZ[1]:bX;},bk.SplitChars(bW.getAttribute("ws-on"),[" "],1))));});X.IterSelector(bT,"[ws-attr-holes]",function(bW){var bX,bY,bZ;bX=bk.SplitChars(bW.getAttribute("ws-attr-holes"),[" "],1);for(bY=0,bZ=bX.length-1;bY<=bZ;bY++)(function(){var b0;function b1(b2,b3){var b4;b4=i.KeyValue(b3);return b2.replace(new a.RegExp("\\${"+b4[0]+"}","ig"),"${"+b4[1]+"}");}b0=n.get(bX,bY);return bW.setAttribute(b0,(((bO.Curried3(E.fold))(b1))(bW.getAttribute(b0)))(bU));}());});};_7.fill=function(bT,bU,bV){while(true)if(bT.hasChildNodes())bV=bU.insertBefore(bT.lastChild,bV);else return null;};_7.convertAttrs=function(bT){var bV,bW,bX,bY,bZ,b0,b1,b2;function bU(b3){var b4;b4=bT.getAttribute(b3);b4===null?void 0:bT.setAttribute(b3,b4.toLowerCase());}bV=bT.attributes;bW=[];bX=[];bY=[];for(bZ=0,b0=bV.length-1;bZ<=b0;bZ++){b1=bV.item(bZ);bk.StartsWith(b1.nodeName,"ws-on")&&b1.nodeName!=="ws-onafterrender"&&b1.nodeName!=="ws-on"?(bW.push(b1.nodeName),bX.push(_8.string(b1.nodeName,{$:1,$0:"ws-on".length},null)+":"+b1.nodeValue.toLowerCase())):!bk.StartsWith(b1.nodeName,"ws-")&&(new a.RegExp(G.TextHoleRE())).test(b1.nodeValue)?(b1.nodeValue=(b2=new a.RegExp(G.TextHoleRE(),"g"),b1.nodeValue.replace(b2,function(b3,b4){return"${"+b4.toLowerCase()+"}";})),bY.push(b1.nodeName)):void 0;}!(bX.length==0)?bT.setAttribute("ws-on",bk.concat(" ",bX)):void 0;!(bY.length==0)?bT.setAttribute("ws-attr-holes",bk.concat(" ",bY)):void 0;bU("ws-hole");bU("ws-replace");bU("ws-attr");bU("ws-onafterrender");bU("ws-var");n.iter(function(b3){bT.removeAttribute(b3);},bW);};_8.string=function(bT,bU,bV){return bU==null?bV!=null&&bV.$==1?bT.slice(0,bV.$0+1):"":bV==null?bT.slice(bU.$0):bT.slice(bU.$0,bV.$0+1);};E.insufficient=function(){return i.FailWith("The input sequence has an insufficient number of elements.");};_9=v.KeyCollection=bO.Class({GetEnumerator$1:function(){return S.Get(E.map(function(bT){return bT.K;},this.d));},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();}},f,_9);_9.New=bO.Ctor(function(bT){f.New.call(this);this.d=bT;},_9);_.get_UseAnimations=function(){return bp.UseAnimations();};_.Play=function(bT){var bU;bU=null;return bt.Delay(function(){return bt.Bind(_.Run(a.ignore,bp.Actions(bT)),function(){bp.Finalize(bT);return bt.Return(null);});});};_.Append=function(bT,bU){return{$:0,$0:bu.Append(bT.$0,bU.$0)};};_.Run=function(bT,bU){var bV;function bW(bX){function bY(bZ,b0){var b1;b1=b0-bZ;bU.Compute(b1);bT();return b1<=bV?void a.requestAnimationFrame(function(b2){bY(bZ,b2);}):bX();}a.requestAnimationFrame(function(bZ){bY(bZ,bZ);});}bV=bU.Duration;return bV===0?bt.Zero():bt.FromContinuations(function(bX,bY,bZ){return bW.apply(null,[bX,bY,bZ]);});};_.Concat=function(bT){return{$:0,$0:bu.Concat(E.map(bp.List,bT))};};_.get_Empty=function(){return{$:0,$0:bu.Empty()};};$.BatchUpdatesEnabled=function(){bq.$cctor();return bq.BatchUpdatesEnabled;};ba.StartProcessor=function(bT){var bU;function bV(){var bW;bW=null;return bt.Delay(function(){return bt.Bind(bT,function(){var bX;bX=bU[0];return bX===1?(bU[0]=0,bt.Zero()):bX===2?(bU[0]=1,bV()):bt.Zero();});});}bU=[0];return function(){var bW;bW=bU[0];bW===0?(bU[0]=1,bt.Start(bV(),null)):bW===1?bU[0]=2:void 0;};};bb.concat=function(bT){var bU,bV;bU=[];for(var bW in bT)bU.push.apply(bU,bT[bW]);return bU;};bd.New=function(bT,bU,bV,bW){var bX;bX={DynElem:bT,DynFlags:bU,DynNodes:bV};bO.SetOptional(bX,"OnAfterRender",bW);return bX;};be.mapInPlace=function(bT,bU){var bV,bW;for(bV=0,bW=bU.length-1;bV<=bW;bV++)bU[bV]=bT(bU[bV]);return bU;};be.ofSeqNonCopying=function(bT){var bU,bV;if(bT instanceof a.Array)return bT;else if(bT instanceof bj)return n.ofList(bT);else if(bT===null)return[];else{bU=[];bV=S.Get(bT);try{while(bV.MoveNext())bU.push(bV.Current());return bU;}finally{if(typeof bV=="object"&&"Dispose"in bV)bV.Dispose();}}};be.TreeReduce=function(bT,bU,bV){var bW;function bX(bY,bZ){var b0,b1;return bZ<=0?bT:bZ===1&&(bY>=0&&bY<bW)?n.get(bV,bY):(b1=bZ/2>>0,bU(bX(bY,b1),bX(bY+b1,bZ-b1)));}bW=n.length(bV);return bX(0,bW);};be.MapTreeReduce=function(bT,bU,bV,bW){var bX;function bY(bZ,b0){var b1,b2;return b0<=0?bU:b0===1&&(bZ>=0&&bZ<bX)?bT(n.get(bW,bZ)):(b2=b0/2>>0,bV(bY(bZ,b2),bY(bZ+b2,b0-b2)));}bX=n.length(bW);return bY(0,bX);};bf=_5.ArrayStorage=bO.Class({SSetAt:function(bT,bU,bV){n.set(bV,bT,bU);return bV;},SAppend:function(bT,bU){bU.push(bT);return bU;},SInit:function(){return this.init;}},f,bf);bf.New=bO.Ctor(function(bT){f.New.call(this);this.init=bT;},bf);bg.Insert=function(bT,bU){var bV,bW,bX;function bY(bZ){if(!(bZ===null))if(bZ!=null&&bZ.$==1)bV.push(bZ.$0);else if(bZ!=null&&bZ.$==2){bY(bZ.$0);bY(bZ.$1);}else if(bZ!=null&&bZ.$==3)bZ.$0(bT);else if(bZ!=null&&bZ.$==4)bW.push(bZ.$0);}bV=[];bW=[];bY(bU);bX=bV.slice(0);return bd.New(bT,bg.Flags(bU),bX,bW.length===0?null:{$:1,$0:function(bZ){E.iter(function(b0){b0(bZ);},bW);}});};bg.Updates=function(bT){return be.MapTreeReduce(function(bU){return bU.NChanged();},N.Const(),N.Map2Unit,bT.DynNodes);};bg.Empty=function(bT){return bd.New(bT,0,[],null);};bg.Flags=function(bT){return bT!==null&&bT.hasOwnProperty("flags")?bT.flags:0;};bg.Static=function(bT){return new O({$:3,$0:bT});};bg.Dynamic=function(bT,bU){return new O({$:1,$0:new bw.New(bT,bU)});};bg.EmptyAttr=function(){bx.$cctor();return bx.EmptyAttr;};bg.HasExitAnim=function(bT){var bU;bU=2;return(bT.DynFlags&bU)===bU;};bg.GetExitAnim=function(bT){return bg.GetAnim(bT,function(bU,bV){return bU.NGetExitAnim(bV);});};bg.HasEnterAnim=function(bT){var bU;bU=1;return(bT.DynFlags&bU)===bU;};bg.GetEnterAnim=function(bT){return bg.GetAnim(bT,function(bU,bV){return bU.NGetEnterAnim(bV);});};bg.HasChangeAnim=function(bT){var bU;bU=4;return(bT.DynFlags&bU)===bU;};bg.GetChangeAnim=function(bT){return bg.GetAnim(bT,function(bU,bV){return bU.NGetChangeAnim(bV);});};bg.AppendTree=function(bT,bU){var bV;return bT===null?bU:bU===null?bT:(bV=new O({$:2,$0:bT,$1:bU}),(bg.SetFlags(bV,bg.Flags(bT)|bg.Flags(bU)),bV));};bg.GetAnim=function(bT,bU){return _.Concat(n.map(function(bV){return bU(bV,bT.DynElem);},bT.DynNodes));};bg.Sync=function(bT,bU){n.iter(function(bV){bV.NSync(bT);},bU.DynNodes);};bg.SetFlags=function(bT,bU){bT.flags=bU;};bh.Handler=function(bT,bU){return bg.Static(function(bV){bV.addEventListener(bT,function(bW){return(bU(bV))(bW);},false);});};bh.OnAfterRender=function(bT){return new O({$:4,$0:bT});};bh.Value=function(bT){function bU(bV){return{$:1,$0:bV};}return bh.CustomValue(bT,a.id,function(bV){return bU(a.id(bV));});};bh.Checked=function(bT){function bU(bV,bW){return!x.Equals(bT.Get(),bV.checked)?bT.Set(bV.checked):null;}return O.Concat([bh.DynamicProp("checked",bT.get_View()),bh.Handler("change",function(bV){return function(bW){return bU(bV,bW);};})]);};bh.IntValue=function(bT){return bh.CustomVar(bT,function(bU,bV){var bW;bW=bV.get_Input();return bU.value!==bW?void(bU.value=bW):null;},function(bU){var bV,bW,bX;bV=bU.value;return{$:1,$0:br.isBlank(bV)?(bU.checkValidity?bU.checkValidity():true)?new P({$:2,$0:bV}):new P({$:1,$0:bV}):(bW=(bX=0,[Q.TryParseInt32(bV,{get:function(){return bX;},set:function(bY){bX=bY;}}),bX]),bW[0]?new P({$:0,$0:bW[1],$1:bV}):new P({$:1,$0:bV}))};});};bh.IntValueUnchecked=function(bT){return bh.CustomValue(bT,a.String,function(bU){var bV;return br.isBlank(bU)?{$:1,$0:0}:(bV=+bU,bV!==bV>>0?null:{$:1,$0:bV});});};bh.FloatValue=function(bT){return bh.CustomVar(bT,function(bU,bV){var bW;bW=bV.get_Input();return bU.value!==bW?void(bU.value=bW):null;},function(bU){var bV,bW;bV=bU.value;return{$:1,$0:br.isBlank(bV)?(bU.checkValidity?bU.checkValidity():true)?new P({$:2,$0:bV}):new P({$:1,$0:bV}):(bW=+bV,a.isNaN(bW)?new P({$:1,$0:bV}):new P({$:0,$0:bW,$1:bV}))};});};bh.FloatValueUnchecked=function(bT){return bh.CustomValue(bT,a.String,function(bU){var bV;return br.isBlank(bU)?{$:1,$0:0}:(bV=+bU,a.isNaN(bV)?null:{$:1,$0:bV});});};bh.Dynamic=function(bT,bU){return bg.Dynamic(bU,function(bV){return function(bW){return X.SetAttr(bV,bT,bW);};});};bh.CustomValue=function(bT,bU,bV){return bh.CustomVar(bT,function(bW,bX){bW.value=bU(bX);},function(bW){return bV(bW.value);});};bh.DynamicProp=function(bT,bU){return bg.Dynamic(bU,function(bV){return function(bW){bV[bT]=bW;};});};bh.CustomVar=function(bT,bU,bV){function bW(bY,bZ){return bT.UpdateMaybe(function(b0){var b1,b2;b1=bV(bY);return b1!=null&&b1.$==1&&(!x.Equals(b1.$0,b0)&&(b2=[b1,b1.$0],true))?b2[0]:null;});}function bX(bY,bZ){var b0,b1;b0=bV(bY);return b0!=null&&b0.$==1&&(x.Equals(b0.$0,bZ)&&(b1=b0.$0,true))?null:bU(bY,bZ);}return O.Concat([bh.Handler("change",function(bY){return function(bZ){return bW(bY,bZ);};}),bh.Handler("input",function(bY){return function(bZ){return bW(bY,bZ);};}),bh.Handler("keypress",function(bY){return function(bZ){return bW(bY,bZ);};}),bh.DynamicCustom(function(bY){return function(bZ){return bX(bY,bZ);};},bT.get_View())]);};bh.DynamicCustom=function(bT,bU){return bg.Dynamic(bU,bT);};bj=bi.T=bO.Class({GetEnumerator:function(){return new T.New(this,null,function(bT){var bU;bU=bT.s;return bU.$==0?false:(bT.c=bU.$0,bT.s=bU.$1,true);},void 0);},GetEnumerator0:function(){return S.Get(this);}},null,bj);bj.Empty=new bj({$:0});bk.concat=function(bT,bU){return n.ofSeq(bU).join(bT);};bk.SplitChars=function(bT,bU,bV){return bk.Split(bT,new a.RegExp("["+bk.RegexEscape(bU.join(""))+"]"),bV);};bk.StartsWith=function(bT,bU){return bT.substring(0,bU.length)==bU;};bk.Split=function(bT,bU,bV){return bV===1?n.filter(function(bW){return bW!=="";},bk.SplitWith(bT,bU)):bk.SplitWith(bT,bU);};bk.RegexEscape=function(bT){return bT.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};bk.forall=function(bT,bU){return E.forall(bT,bk.protect(bU));};bk.SplitWith=function(bT,bU){return bT.split(bU);};bk.protect=function(bT){return bT===null?"":bT;};bl=g.Updates=bO.Class({},null,bl);bl.Create=function(bT){var bU;bU=null;bU=bl.New(bT,null,function(){var bV;bV=bU.s;return bV===null?(bV=u.Copy(bU.c()),bU.s=bV,u.WhenObsoleteRun(bV,function(){bU.s=null;}),bV):bV;});return bU;};bl.New=function(bT,bU,bV){return new bl({c:bT,s:bU,v:bV});};bn.New=function(bT,bU){return{PreviousNodes:bT,Top:bU};};bo.get_Empty=function(){return{$:0,$0:new C.New$3()};};bo.FindAll=function(bT){var bU;function bV(bX){if(bX!=null&&bX.$==0){bV(bX.$0);bV(bX.$1);}else if(bX!=null&&bX.$==1)bW(bX.$0);else if(bX!=null&&bX.$==2)bV(bX.$0.Current);else if(bX!=null&&bX.$==6)n.iter(bW,bX.$0.Holes);}function bW(bX){bU.push(bX);bV(bX.Children);}bU=[];bV(bT);return{$:0,$0:new C.New$2(bU)};};bo.Filter=function(bT,bU){return{$:0,$0:bC.Filter(bT,bU.$0)};};bo.Except=function(bT,bU){return{$:0,$0:bC.Except(bT.$0,bU.$0)};};bo.ToArray=function(bT){return bC.ToArray(bT.$0);};bo.Intersect=function(bT,bU){return{$:0,$0:bC.Intersect(bT.$0,bU.$0)};};bp.UseAnimations=function(){bs.$cctor();return bs.UseAnimations;};bp.Actions=function(bT){return bp.ConcatActions(n.choose(function(bU){return bU.$==1?{$:1,$0:bU.$0}:null;},bu.ToArray(bT.$0)));};bp.Finalize=function(bT){n.iter(function(bU){if(bU.$==0)bU.$0();},bu.ToArray(bT.$0));};bp.ConcatActions=function(bT){var bU,bV,bW,bX;bU=be.ofSeqNonCopying(bT);bV=n.length(bU);return bV===0?bp.Const():bV===1?n.get(bU,0):(bW=E.max(E.map(function(bY){return bY.Duration;},bU)),(bX=n.map(function(bY){return bp.Prolong(bW,bY);},bU),bp.Def(bW,function(bY){n.iter(function(bZ){bZ.Compute(bY);},bX);})));};bp.List=function(bT){return bT.$0;};bp.Const=function(bT){return bp.Def(0,function(){return bT;});};bp.Def=function(bT,bU){return{Compute:bU,Duration:bT};};bp.Prolong=function(bT,bU){var bV,bW,bX;bV=bU.Compute;bW=bU.Duration;bX=bJ.Create(function(){return bU.Compute(bU.Duration);});return{Compute:function(bY){return bY>=bW?bX.f():bV(bY);},Duration:bT};};bq.$cctor=function(){bq.$cctor=a.ignore;bq.BatchUpdatesEnabled=true;};br.isBlank=function(bT){return bk.forall(bv.IsWhiteSpace,bT);};bs.$cctor=function(){bs.$cctor=a.ignore;bs.CubicInOut=by.Custom(function(bT){var bU;bU=bT*bT;return 3*bU-2*(bU*bT);});bs.UseAnimations=true;};bt.Delay=function(bT){return function(bU){try{(bT(null))(bU);}catch(bV){bU.k({$:1,$0:bV});}};};bt.Bind=function(bT,bU){return bt.checkCancel(function(bV){bT(bz.New(function(bW){var bX;if(bW.$==0){bX=bW.$0;bt.scheduler().Fork(function(){try{(bU(bX))(bV);}catch(bY){bV.k({$:1,$0:bY});}});}else bt.scheduler().Fork(function(){bV.k(bW);});},bV.ct));});};bt.Zero=function(){bA.$cctor();return bA.Zero;};bt.Start=function(bT,bU){var bV,bW;bV=(bW=(bt.defCTS())[0],bU==null?bW:bU.$0);bt.scheduler().Fork(function(){if(!bV.c)bT(bz.New(function(bX){if(bX.$==1)bt.UncaughtAsyncError(bX.$0);},bV));});};bt.Return=function(bT){return function(bU){bU.k({$:0,$0:bT});};};bt.checkCancel=function(bT){return function(bU){if(bU.ct.c)bt.cancel(bU);else bT(bU);};};bt.defCTS=function(){bA.$cctor();return bA.defCTS;};bt.UncaughtAsyncError=function(bT){bP.log("WebSharper: Uncaught asynchronous exception",bT);};bt.FromContinuations=function(bT){return function(bU){var bV;function bW(bX){if(bV[0])i.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{bV[0]=true;bt.scheduler().Fork(bX);}}bV=[false];bT(function(bX){bW(function(){bU.k({$:0,$0:bX});});},function(bX){bW(function(){bU.k({$:1,$0:bX});});},function(bX){bW(function(){bU.k({$:2,$0:bX});});});};};bt.cancel=function(bT){bT.k({$:2,$0:new bI.New(bT.ct)});};bt.scheduler=function(){bA.$cctor();return bA.scheduler;};bu.Append=function(bT,bU){return bT.$==0?bU:bU.$==0?bT:{$:2,$0:bT,$1:bU};};bu.ToArray=function(bT){var bU;function bV(bW){if(bW.$==1)bU.push(bW.$0);else if(bW.$==2){bV(bW.$0);bV(bW.$1);}else if(bW.$==3)n.iter(function(bX){bU.push(bX);},bW.$0);}bU=[];bV(bT);return bU.slice(0);};bu.Concat=function(bT){var bU;bU=be.ofSeqNonCopying(bT);return be.TreeReduce(bu.Empty(),bu.Append,bU);};bu.Empty=function(){bK.$cctor();return bK.Empty;};bi.head=function(bT){return bT.$==1?bT.$0:bi.listEmpty();};bi.tail=function(bT){return bT.$==1?bT.$1:bi.listEmpty();};bi.listEmpty=function(){return i.FailWith("The input list was empty.");};bv.IsWhiteSpace=function(bT){return bT.match(new a.RegExp("\\s"))!==null;};Q.TryParse=function(bT,bU,bV,bW){var bX,bY;bX=+bT;bY=bX===bX-bX%1&&bX>=bU&&bX<=bV;bY?bW.set(bX):void 0;return bY;};bw=g.DynamicAttrNode=bO.Class({NChanged:function(){return this.updates;},NGetExitAnim:function(bT){return _.get_Empty();},NGetEnterAnim:function(bT){return _.get_Empty();},NGetChangeAnim:function(bT){return _.get_Empty();},NSync:function(bT){if(this.dirty){(this.push(bT))(this.value);this.dirty=false;}}},f,bw);bw.New=bO.Ctor(function(bT,bU){var bV;bV=this;f.New.call(this);this.push=bU;this.value=void 0;this.dirty=false;this.updates=N.Map(function(bW){bV.value=bW;bV.dirty=true;},bT);},bw);bx.$cctor=function(){bx.$cctor=a.ignore;bx.EmptyAttr=null;};by=g.Easing=bO.Class({},f,by);by.Custom=function(bT){return new by.New(bT);};by.New=bO.Ctor(function(bT){f.New.call(this);this.transformTime=bT;},by);bz.New=function(bT,bU){return{k:bT,ct:bU};};bA.$cctor=function(){bA.$cctor=a.ignore;bA.noneCT=bB.New(false,[]);bA.scheduler=new bD.New();bA.defCTS=[new bE.New()];bA.Zero=bt.Return();bA.GetCT=function(bT){bT.k({$:0,$0:bT.ct});};};bB.New=function(bT,bU){return{c:bT,r:bU};};bC.Filter=function(bT,bU){return new C.New$2(n.filter(bT,bC.ToArray(bU)));};bC.Except=function(bT,bU){var bV;bV=new C.New$2(bC.ToArray(bU));bV.ExceptWith(bC.ToArray(bT));return bV;};bC.ToArray=function(bT){var bU;bU=n.create(bT.get_Count(),void 0);bT.CopyTo(bU);return bU;};bC.Intersect=function(bT,bU){var bV;bV=new C.New$2(bC.ToArray(bT));bV.IntersectWith(bC.ToArray(bU));return bV;};bD=bt.Scheduler=bO.Class({Fork:function(bT){var bU;bU=this;this.robin.push(bT);this.idle?(this.idle=false,a.setTimeout(function(){bU.tick();},0)):void 0;},tick:function(){var bT,bU,bV;bU=this;bV=bS.now();bT=true;while(bT)if(this.robin.length===0){this.idle=true;bT=false;}else{(this.robin.shift())();bS.now()-bV>40?(a.setTimeout(function(){bU.tick();},0),bT=false):void 0;}}},f,bD);bD.New=bO.Ctor(function(){f.New.call(this);this.idle=true;this.robin=[];},bD);bE=e.CancellationTokenSource=bO.Class({},f,bE);bE.New=bO.Ctor(function(){f.New.call(this);this.c=false;this.pending=null;this.r=[];this.init=1;},bE);bF.Children=function(bT,bU){var bV,bW,bX;if(bU!=null&&bU.$==1){bX=[];bV=bU.$0[0].nextSibling;while(bV!==bU.$0[1]){bX.push(bV);bV=bV.nextSibling;}return{$:0,$0:bX};}else return{$:0,$0:n.init(bT.childNodes.length,(bW=bT.childNodes,function(bY){return bW[bY];}))};};bF.Except=function(bT,bU){var bV;bV=bT.$0;return{$:0,$0:n.filter(function(bW){return n.forall(function(bX){return!(bW===bX);},bV);},bU.$0)};};bF.Iter=function(bT,bU){n.iter(bT,bU.$0);};bF.DocChildren=function(bT){var bU;function bV(bW){if(bW!=null&&bW.$==2)bV(bW.$0.Current);else if(bW!=null&&bW.$==1)bU.push(bW.$0.El);else if(bW==null);else if(bW!=null&&bW.$==5)bU.push(bW.$0);else if(bW!=null&&bW.$==4)bU.push(bW.$0.Text);else if(bW!=null&&bW.$==6)n.iter(function(bX){if(bX==null||bX.constructor===M)bV(bX);else bU.push(bX);},bW.$0.Els);else{bV(bW.$0);bV(bW.$1);}}bU=[];bV(bT.Children);return{$:0,$0:be.ofSeqNonCopying(bU)};};bG.Clear=function(bT){bT.splice(0,n.length(bT));};bI=e.OperationCanceledException=bO.Class({},bH,bI);bI.New=bO.Ctor(function(bT){bI.New$1.call(this,"The operation was canceled.",null,bT);},bI);bI.New$1=bO.Ctor(function(bT,bU,bV){this.message=bT;this.inner=bU;M.setPrototypeOf(this,bI.prototype);this.ct=bV;},bI);bJ.Create=function(bT){return bM.New(false,bT,bJ.forceLazy);};bJ.forceLazy=function(){var bT;bT=this.v();this.c=true;this.v=bT;this.f=bJ.cachedLazy;return bT;};bJ.cachedLazy=function(){return this.v;};bK.$cctor=function(){bK.$cctor=a.ignore;bK.Empty={$:0};};bM.New=function(bT,bU,bV){return{c:bT,v:bU,f:bV};};bO.OnLoad(function(){d.Main();});}());


if (typeof IntelliFactory !=='undefined') {
  IntelliFactory.Runtime.ScriptBasePath = '/Content/';
  IntelliFactory.Runtime.Start();
}
